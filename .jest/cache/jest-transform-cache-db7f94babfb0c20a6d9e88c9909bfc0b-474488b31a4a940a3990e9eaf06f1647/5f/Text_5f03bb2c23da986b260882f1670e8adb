91da6fdb4fa26df79c03f3dc21cc6957
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var PressabilityDebug = _interopRequireWildcard(require("../Pressability/PressabilityDebug"));
var _usePressability = _interopRequireDefault(require("../Pressability/usePressability"));
var _StyleSheet = _interopRequireDefault(require("../StyleSheet/StyleSheet"));
var _processColor = _interopRequireDefault(require("../StyleSheet/processColor"));
var _TextAncestor = _interopRequireDefault(require("./TextAncestor"));
var _TextNativeComponent = require("./TextNativeComponent");
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["accessible", "allowFontScaling", "ellipsizeMode", "onLongPress", "onPress", "onPressIn", "onPressOut", "onResponderGrant", "onResponderMove", "onResponderRelease", "onResponderTerminate", "onResponderTerminationRequest", "onStartShouldSetResponder", "pressRetentionOffset", "suppressHighlighting"];
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var Text = React.forwardRef(function (props, forwardedRef) {
  var accessible = props.accessible,
    allowFontScaling = props.allowFontScaling,
    ellipsizeMode = props.ellipsizeMode,
    onLongPress = props.onLongPress,
    onPress = props.onPress,
    _onPressIn = props.onPressIn,
    _onPressOut = props.onPressOut,
    _onResponderGrant = props.onResponderGrant,
    _onResponderMove = props.onResponderMove,
    _onResponderRelease = props.onResponderRelease,
    _onResponderTerminate = props.onResponderTerminate,
    onResponderTerminationRequest = props.onResponderTerminationRequest,
    onStartShouldSetResponder = props.onStartShouldSetResponder,
    pressRetentionOffset = props.pressRetentionOffset,
    suppressHighlighting = props.suppressHighlighting,
    restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var _useState = (0, React.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    isHighlighted = _useState2[0],
    setHighlighted = _useState2[1];
  var isPressable = (onPress != null || onLongPress != null || onStartShouldSetResponder != null) && restProps.disabled !== true;
  var initialized = useLazyInitialization(isPressable);
  var config = (0, React.useMemo)(function () {
    return initialized ? {
      disabled: !isPressable,
      pressRectOffset: pressRetentionOffset,
      onLongPress: onLongPress,
      onPress: onPress,
      onPressIn: function onPressIn(event) {
        setHighlighted(!suppressHighlighting);
        _onPressIn == null ? void 0 : _onPressIn(event);
      },
      onPressOut: function onPressOut(event) {
        setHighlighted(false);
        _onPressOut == null ? void 0 : _onPressOut(event);
      },
      onResponderTerminationRequest_DEPRECATED: onResponderTerminationRequest,
      onStartShouldSetResponder_DEPRECATED: onStartShouldSetResponder
    } : null;
  }, [initialized, isPressable, pressRetentionOffset, onLongPress, onPress, _onPressIn, _onPressOut, onResponderTerminationRequest, onStartShouldSetResponder, suppressHighlighting]);
  var eventHandlers = (0, _usePressability.default)(config);
  var eventHandlersForText = (0, React.useMemo)(function () {
    return eventHandlers == null ? null : {
      onResponderGrant: function onResponderGrant(event) {
        eventHandlers.onResponderGrant(event);
        if (_onResponderGrant != null) {
          _onResponderGrant(event);
        }
      },
      onResponderMove: function onResponderMove(event) {
        eventHandlers.onResponderMove(event);
        if (_onResponderMove != null) {
          _onResponderMove(event);
        }
      },
      onResponderRelease: function onResponderRelease(event) {
        eventHandlers.onResponderRelease(event);
        if (_onResponderRelease != null) {
          _onResponderRelease(event);
        }
      },
      onResponderTerminate: function onResponderTerminate(event) {
        eventHandlers.onResponderTerminate(event);
        if (_onResponderTerminate != null) {
          _onResponderTerminate(event);
        }
      },
      onResponderTerminationRequest: eventHandlers.onResponderTerminationRequest,
      onStartShouldSetResponder: eventHandlers.onStartShouldSetResponder
    };
  }, [eventHandlers, _onResponderGrant, _onResponderMove, _onResponderRelease, _onResponderTerminate]);
  var selectionColor = restProps.selectionColor == null ? null : (0, _processColor.default)(restProps.selectionColor);
  var style = restProps.style;
  if (__DEV__) {
    if (PressabilityDebug.isEnabled() && onPress != null) {
      style = _StyleSheet.default.compose(restProps.style, {
        color: 'magenta'
      });
    }
  }
  var numberOfLines = restProps.numberOfLines;
  if (numberOfLines != null && !(numberOfLines >= 0)) {
    console.error(`'numberOfLines' in <Text> must be a non-negative number, received: ${numberOfLines}. The value will be set to 0.`);
    numberOfLines = 0;
  }
  var hasTextAncestor = (0, React.useContext)(_TextAncestor.default);
  return hasTextAncestor ? (0, _jsxRuntime.jsx)(_TextNativeComponent.NativeVirtualText, Object.assign({}, restProps, eventHandlersForText, {
    isHighlighted: isHighlighted,
    isPressable: isPressable,
    numberOfLines: numberOfLines,
    selectionColor: selectionColor,
    style: style,
    ref: forwardedRef
  })) : (0, _jsxRuntime.jsx)(_TextAncestor.default.Provider, {
    value: true,
    children: (0, _jsxRuntime.jsx)(_TextNativeComponent.NativeText, Object.assign({}, restProps, eventHandlersForText, {
      accessible: accessible !== false,
      allowFontScaling: allowFontScaling !== false,
      ellipsizeMode: ellipsizeMode != null ? ellipsizeMode : 'tail',
      isHighlighted: isHighlighted,
      numberOfLines: numberOfLines,
      selectionColor: selectionColor,
      style: style,
      ref: forwardedRef
    }))
  });
});
Text.displayName = 'Text';
Text.propTypes = require('deprecated-react-native-prop-types').TextPropTypes;
function useLazyInitialization(newValue) {
  var _useState3 = (0, React.useState)(newValue),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    oldValue = _useState4[0],
    setValue = _useState4[1];
  if (!oldValue && newValue) {
    setValue(newValue);
  }
  return oldValue;
}
module.exports = Text;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmVzc2FiaWxpdHlEZWJ1ZyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl91c2VQcmVzc2FiaWxpdHkiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX1N0eWxlU2hlZXQiLCJfcHJvY2Vzc0NvbG9yIiwiX1RleHRBbmNlc3RvciIsIl9UZXh0TmF0aXZlQ29tcG9uZW50IiwiUmVhY3QiLCJfanN4UnVudGltZSIsIl9leGNsdWRlZCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJUZXh0IiwiZm9yd2FyZFJlZiIsInByb3BzIiwiZm9yd2FyZGVkUmVmIiwiYWNjZXNzaWJsZSIsImFsbG93Rm9udFNjYWxpbmciLCJlbGxpcHNpemVNb2RlIiwib25Mb25nUHJlc3MiLCJvblByZXNzIiwib25QcmVzc0luIiwib25QcmVzc091dCIsIm9uUmVzcG9uZGVyR3JhbnQiLCJvblJlc3BvbmRlck1vdmUiLCJvblJlc3BvbmRlclJlbGVhc2UiLCJvblJlc3BvbmRlclRlcm1pbmF0ZSIsIm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0Iiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInByZXNzUmV0ZW50aW9uT2Zmc2V0Iiwic3VwcHJlc3NIaWdobGlnaHRpbmciLCJyZXN0UHJvcHMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiaXNIaWdobGlnaHRlZCIsInNldEhpZ2hsaWdodGVkIiwiaXNQcmVzc2FibGUiLCJkaXNhYmxlZCIsImluaXRpYWxpemVkIiwidXNlTGF6eUluaXRpYWxpemF0aW9uIiwiY29uZmlnIiwidXNlTWVtbyIsInByZXNzUmVjdE9mZnNldCIsImV2ZW50Iiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3RfREVQUkVDQVRFRCIsIm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXJfREVQUkVDQVRFRCIsImV2ZW50SGFuZGxlcnMiLCJ1c2VQcmVzc2FiaWxpdHkiLCJldmVudEhhbmRsZXJzRm9yVGV4dCIsInNlbGVjdGlvbkNvbG9yIiwicHJvY2Vzc0NvbG9yIiwic3R5bGUiLCJfX0RFVl9fIiwiaXNFbmFibGVkIiwiU3R5bGVTaGVldCIsImNvbXBvc2UiLCJjb2xvciIsIm51bWJlck9mTGluZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJoYXNUZXh0QW5jZXN0b3IiLCJ1c2VDb250ZXh0IiwiVGV4dEFuY2VzdG9yIiwianN4IiwiTmF0aXZlVmlydHVhbFRleHQiLCJhc3NpZ24iLCJyZWYiLCJQcm92aWRlciIsInZhbHVlIiwiY2hpbGRyZW4iLCJOYXRpdmVUZXh0IiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJUZXh0UHJvcFR5cGVzIiwibmV3VmFsdWUiLCJfdXNlU3RhdGUzIiwiX3VzZVN0YXRlNCIsIm9sZFZhbHVlIiwic2V0VmFsdWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0ICogYXMgUHJlc3NhYmlsaXR5RGVidWcgZnJvbSAnLi4vUHJlc3NhYmlsaXR5L1ByZXNzYWJpbGl0eURlYnVnJztcbmltcG9ydCB1c2VQcmVzc2FiaWxpdHkgZnJvbSAnLi4vUHJlc3NhYmlsaXR5L3VzZVByZXNzYWJpbGl0eSc7XG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHByb2Nlc3NDb2xvciBmcm9tICcuLi9TdHlsZVNoZWV0L3Byb2Nlc3NDb2xvcic7XG5pbXBvcnQgVGV4dEFuY2VzdG9yIGZyb20gJy4vVGV4dEFuY2VzdG9yJztcbmltcG9ydCB7TmF0aXZlVGV4dCwgTmF0aXZlVmlydHVhbFRleHR9IGZyb20gJy4vVGV4dE5hdGl2ZUNvbXBvbmVudCc7XG5pbXBvcnQge3R5cGUgVGV4dFByb3BzfSBmcm9tICcuL1RleHRQcm9wcyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZUNvbnRleHQsIHVzZU1lbW8sIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogVGV4dCBpcyB0aGUgZnVuZGFtZW50YWwgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHRleHQuXG4gKlxuICogQHNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3RleHRcbiAqL1xuY29uc3QgVGV4dDogUmVhY3QuQWJzdHJhY3RDb21wb25lbnQ8XG4gIFRleHRQcm9wcyxcbiAgUmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgTmF0aXZlVGV4dCB8IHR5cGVvZiBOYXRpdmVWaXJ0dWFsVGV4dD4sXG4+ID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHM6IFRleHRQcm9wcywgZm9yd2FyZGVkUmVmKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBhY2Nlc3NpYmxlLFxuICAgIGFsbG93Rm9udFNjYWxpbmcsXG4gICAgZWxsaXBzaXplTW9kZSxcbiAgICBvbkxvbmdQcmVzcyxcbiAgICBvblByZXNzLFxuICAgIG9uUHJlc3NJbixcbiAgICBvblByZXNzT3V0LFxuICAgIG9uUmVzcG9uZGVyR3JhbnQsXG4gICAgb25SZXNwb25kZXJNb3ZlLFxuICAgIG9uUmVzcG9uZGVyUmVsZWFzZSxcbiAgICBvblJlc3BvbmRlclRlcm1pbmF0ZSxcbiAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCxcbiAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgIHByZXNzUmV0ZW50aW9uT2Zmc2V0LFxuICAgIHN1cHByZXNzSGlnaGxpZ2h0aW5nLFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgW2lzSGlnaGxpZ2h0ZWQsIHNldEhpZ2hsaWdodGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBpc1ByZXNzYWJsZSA9XG4gICAgKG9uUHJlc3MgIT0gbnVsbCB8fFxuICAgICAgb25Mb25nUHJlc3MgIT0gbnVsbCB8fFxuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlciAhPSBudWxsKSAmJlxuICAgIHJlc3RQcm9wcy5kaXNhYmxlZCAhPT0gdHJ1ZTtcblxuICBjb25zdCBpbml0aWFsaXplZCA9IHVzZUxhenlJbml0aWFsaXphdGlvbihpc1ByZXNzYWJsZSk7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGluaXRpYWxpemVkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgZGlzYWJsZWQ6ICFpc1ByZXNzYWJsZSxcbiAgICAgICAgICAgIHByZXNzUmVjdE9mZnNldDogcHJlc3NSZXRlbnRpb25PZmZzZXQsXG4gICAgICAgICAgICBvbkxvbmdQcmVzcyxcbiAgICAgICAgICAgIG9uUHJlc3MsXG4gICAgICAgICAgICBvblByZXNzSW4oZXZlbnQpIHtcbiAgICAgICAgICAgICAgc2V0SGlnaGxpZ2h0ZWQoIXN1cHByZXNzSGlnaGxpZ2h0aW5nKTtcbiAgICAgICAgICAgICAgb25QcmVzc0luPy4oZXZlbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUHJlc3NPdXQoZXZlbnQpIHtcbiAgICAgICAgICAgICAgc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICBvblByZXNzT3V0Py4oZXZlbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0X0RFUFJFQ0FURUQ6XG4gICAgICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0LFxuICAgICAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcl9ERVBSRUNBVEVEOiBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIFtcbiAgICAgIGluaXRpYWxpemVkLFxuICAgICAgaXNQcmVzc2FibGUsXG4gICAgICBwcmVzc1JldGVudGlvbk9mZnNldCxcbiAgICAgIG9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzcyxcbiAgICAgIG9uUHJlc3NJbixcbiAgICAgIG9uUHJlc3NPdXQsXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCxcbiAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIsXG4gICAgICBzdXBwcmVzc0hpZ2hsaWdodGluZyxcbiAgICBdLFxuICApO1xuXG4gIGNvbnN0IGV2ZW50SGFuZGxlcnMgPSB1c2VQcmVzc2FiaWxpdHkoY29uZmlnKTtcbiAgY29uc3QgZXZlbnRIYW5kbGVyc0ZvclRleHQgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBldmVudEhhbmRsZXJzID09IG51bGxcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDoge1xuICAgICAgICAgICAgb25SZXNwb25kZXJHcmFudChldmVudCkge1xuICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLm9uUmVzcG9uZGVyR3JhbnQoZXZlbnQpO1xuICAgICAgICAgICAgICBpZiAob25SZXNwb25kZXJHcmFudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb25SZXNwb25kZXJHcmFudChldmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlc3BvbmRlck1vdmUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgZXZlbnRIYW5kbGVycy5vblJlc3BvbmRlck1vdmUoZXZlbnQpO1xuICAgICAgICAgICAgICBpZiAob25SZXNwb25kZXJNb3ZlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvblJlc3BvbmRlck1vdmUoZXZlbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZXNwb25kZXJSZWxlYXNlKGV2ZW50KSB7XG4gICAgICAgICAgICAgIGV2ZW50SGFuZGxlcnMub25SZXNwb25kZXJSZWxlYXNlKGV2ZW50KTtcbiAgICAgICAgICAgICAgaWYgKG9uUmVzcG9uZGVyUmVsZWFzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb25SZXNwb25kZXJSZWxlYXNlKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlKGV2ZW50KSB7XG4gICAgICAgICAgICAgIGV2ZW50SGFuZGxlcnMub25SZXNwb25kZXJUZXJtaW5hdGUoZXZlbnQpO1xuICAgICAgICAgICAgICBpZiAob25SZXNwb25kZXJUZXJtaW5hdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OlxuICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0LFxuICAgICAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogZXZlbnRIYW5kbGVycy5vblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgICAgICAgIH0sXG4gICAgW1xuICAgICAgZXZlbnRIYW5kbGVycyxcbiAgICAgIG9uUmVzcG9uZGVyR3JhbnQsXG4gICAgICBvblJlc3BvbmRlck1vdmUsXG4gICAgICBvblJlc3BvbmRlclJlbGVhc2UsXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZSxcbiAgICBdLFxuICApO1xuXG4gIC8vIFRPRE86IE1vdmUgdGhpcyBwcm9jZXNzaW5nIHRvIHRoZSB2aWV3IGNvbmZpZ3VyYXRpb24uXG4gIGNvbnN0IHNlbGVjdGlvbkNvbG9yID1cbiAgICByZXN0UHJvcHMuc2VsZWN0aW9uQ29sb3IgPT0gbnVsbFxuICAgICAgPyBudWxsXG4gICAgICA6IHByb2Nlc3NDb2xvcihyZXN0UHJvcHMuc2VsZWN0aW9uQ29sb3IpO1xuXG4gIGxldCBzdHlsZSA9IHJlc3RQcm9wcy5zdHlsZTtcbiAgaWYgKF9fREVWX18pIHtcbiAgICBpZiAoUHJlc3NhYmlsaXR5RGVidWcuaXNFbmFibGVkKCkgJiYgb25QcmVzcyAhPSBudWxsKSB7XG4gICAgICBzdHlsZSA9IFN0eWxlU2hlZXQuY29tcG9zZShyZXN0UHJvcHMuc3R5bGUsIHtcbiAgICAgICAgY29sb3I6ICdtYWdlbnRhJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGxldCBudW1iZXJPZkxpbmVzID0gcmVzdFByb3BzLm51bWJlck9mTGluZXM7XG4gIGlmIChudW1iZXJPZkxpbmVzICE9IG51bGwgJiYgIShudW1iZXJPZkxpbmVzID49IDApKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIGAnbnVtYmVyT2ZMaW5lcycgaW4gPFRleHQ+IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLCByZWNlaXZlZDogJHtudW1iZXJPZkxpbmVzfS4gVGhlIHZhbHVlIHdpbGwgYmUgc2V0IHRvIDAuYCxcbiAgICApO1xuICAgIG51bWJlck9mTGluZXMgPSAwO1xuICB9XG5cbiAgY29uc3QgaGFzVGV4dEFuY2VzdG9yID0gdXNlQ29udGV4dChUZXh0QW5jZXN0b3IpO1xuXG4gIHJldHVybiBoYXNUZXh0QW5jZXN0b3IgPyAoXG4gICAgPE5hdGl2ZVZpcnR1YWxUZXh0XG4gICAgICB7Li4ucmVzdFByb3BzfVxuICAgICAgey4uLmV2ZW50SGFuZGxlcnNGb3JUZXh0fVxuICAgICAgaXNIaWdobGlnaHRlZD17aXNIaWdobGlnaHRlZH1cbiAgICAgIGlzUHJlc3NhYmxlPXtpc1ByZXNzYWJsZX1cbiAgICAgIG51bWJlck9mTGluZXM9e251bWJlck9mTGluZXN9XG4gICAgICBzZWxlY3Rpb25Db2xvcj17c2VsZWN0aW9uQ29sb3J9XG4gICAgICBzdHlsZT17c3R5bGV9XG4gICAgICByZWY9e2ZvcndhcmRlZFJlZn1cbiAgICAvPlxuICApIDogKFxuICAgIDxUZXh0QW5jZXN0b3IuUHJvdmlkZXIgdmFsdWU9e3RydWV9PlxuICAgICAgPE5hdGl2ZVRleHRcbiAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgey4uLmV2ZW50SGFuZGxlcnNGb3JUZXh0fVxuICAgICAgICBhY2Nlc3NpYmxlPXthY2Nlc3NpYmxlICE9PSBmYWxzZX1cbiAgICAgICAgYWxsb3dGb250U2NhbGluZz17YWxsb3dGb250U2NhbGluZyAhPT0gZmFsc2V9XG4gICAgICAgIGVsbGlwc2l6ZU1vZGU9e2VsbGlwc2l6ZU1vZGUgPz8gJ3RhaWwnfVxuICAgICAgICBpc0hpZ2hsaWdodGVkPXtpc0hpZ2hsaWdodGVkfVxuICAgICAgICBudW1iZXJPZkxpbmVzPXtudW1iZXJPZkxpbmVzfVxuICAgICAgICBzZWxlY3Rpb25Db2xvcj17c2VsZWN0aW9uQ29sb3J9XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgcmVmPXtmb3J3YXJkZWRSZWZ9XG4gICAgICAvPlxuICAgIDwvVGV4dEFuY2VzdG9yLlByb3ZpZGVyPlxuICApO1xufSk7XG5cblRleHQuZGlzcGxheU5hbWUgPSAnVGV4dCc7XG5cbi8qKlxuICogU3dpdGNoIHRvIGBkZXByZWNhdGVkLXJlYWN0LW5hdGl2ZS1wcm9wLXR5cGVzYCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGZ1dHVyZVxuICogcmVsZWFzZXMuIFRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuXG4gKi9cblRleHQucHJvcFR5cGVzID0gcmVxdWlyZSgnZGVwcmVjYXRlZC1yZWFjdC1uYXRpdmUtcHJvcC10eXBlcycpLlRleHRQcm9wVHlwZXM7XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSB1bnRpbCB0aGUgZmlyc3QgdGltZSBgbmV3VmFsdWVgIGlzIHRydWUsIGFmdGVyIHdoaWNoIHRoaXMgd2lsbFxuICogYWx3YXlzIHJldHVybiB0cnVlLiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBsYXppbHkgaW5pdGlhbGl6ZSBgUHJlc3NhYmlsaXR5YCBzb1xuICogd2UgZG8gbm90IGVhZ2VybHkgY3JlYXRlIG9uZSBmb3IgZXZlcnkgcHJlc3NhYmxlIGBUZXh0YCBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIHVzZUxhenlJbml0aWFsaXphdGlvbihuZXdWYWx1ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICBjb25zdCBbb2xkVmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKG5ld1ZhbHVlKTtcbiAgaWYgKCFvbGRWYWx1ZSAmJiBuZXdWYWx1ZSkge1xuICAgIHNldFZhbHVlKG5ld1ZhbHVlKTtcbiAgfVxuICByZXR1cm4gb2xkVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGV4dDtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBVUEsSUFBQUEsaUJBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGdCQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxhQUFBLEdB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