d5738b0e1cf8540e777a7b9260243837
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _AnimatedColor = _interopRequireDefault(require("./nodes/AnimatedColor"));
var _require = require('./AnimatedEvent'),
  AnimatedEvent = _require.AnimatedEvent,
  attachNativeEvent = _require.attachNativeEvent;
var AnimatedAddition = require('./nodes/AnimatedAddition');
var AnimatedDiffClamp = require('./nodes/AnimatedDiffClamp');
var AnimatedDivision = require('./nodes/AnimatedDivision');
var AnimatedInterpolation = require('./nodes/AnimatedInterpolation');
var AnimatedModulo = require('./nodes/AnimatedModulo');
var AnimatedMultiplication = require('./nodes/AnimatedMultiplication');
var AnimatedNode = require('./nodes/AnimatedNode');
var AnimatedSubtraction = require('./nodes/AnimatedSubtraction');
var AnimatedTracking = require('./nodes/AnimatedTracking');
var AnimatedValue = require('./nodes/AnimatedValue');
var AnimatedValueXY = require('./nodes/AnimatedValueXY');
var DecayAnimation = require('./animations/DecayAnimation');
var SpringAnimation = require('./animations/SpringAnimation');
var TimingAnimation = require('./animations/TimingAnimation');
var createAnimatedComponent = require('./createAnimatedComponent');
var add = function add(a, b) {
  return new AnimatedAddition(a, b);
};
var subtract = function subtract(a, b) {
  return new AnimatedSubtraction(a, b);
};
var divide = function divide(a, b) {
  return new AnimatedDivision(a, b);
};
var multiply = function multiply(a, b) {
  return new AnimatedMultiplication(a, b);
};
var modulo = function modulo(a, modulus) {
  return new AnimatedModulo(a, modulus);
};
var diffClamp = function diffClamp(a, min, max) {
  return new AnimatedDiffClamp(a, min, max);
};
var _combineCallbacks = function _combineCallbacks(callback, config) {
  if (callback && config.onComplete) {
    return function () {
      config.onComplete && config.onComplete.apply(config, arguments);
      callback && callback.apply(void 0, arguments);
    };
  } else {
    return callback || config.onComplete;
  }
};
var maybeVectorAnim = function maybeVectorAnim(value, config, anim) {
  if (value instanceof AnimatedValueXY) {
    var configX = Object.assign({}, config);
    var configY = Object.assign({}, config);
    for (var key in config) {
      var _config$key = config[key],
        x = _config$key.x,
        y = _config$key.y;
      if (x !== undefined && y !== undefined) {
        configX[key] = x;
        configY[key] = y;
      }
    }
    var aX = anim(value.x, configX);
    var aY = anim(value.y, configY);
    return parallel([aX, aY], {
      stopTogether: false
    });
  } else if (value instanceof _AnimatedColor.default) {
    var configR = Object.assign({}, config);
    var configG = Object.assign({}, config);
    var configB = Object.assign({}, config);
    var configA = Object.assign({}, config);
    for (var _key in config) {
      var _config$_key = config[_key],
        r = _config$_key.r,
        g = _config$_key.g,
        b = _config$_key.b,
        a = _config$_key.a;
      if (r !== undefined && g !== undefined && b !== undefined && a !== undefined) {
        configR[_key] = r;
        configG[_key] = g;
        configB[_key] = b;
        configA[_key] = a;
      }
    }
    var aR = anim(value.r, configR);
    var aG = anim(value.g, configG);
    var aB = anim(value.b, configB);
    var aA = anim(value.a, configA);
    return parallel([aR, aG, aB, aA], {
      stopTogether: false
    });
  }
  return null;
};
var spring = function spring(value, config) {
  var _start = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, SpringAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new SpringAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, spring) || {
    start: function start(callback) {
      _start(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });
      _start(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var timing = function timing(value, config) {
  var _start2 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, TimingAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new TimingAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, timing) || {
    start: function start(callback) {
      _start2(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });
      _start2(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var decay = function decay(value, config) {
  var _start3 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    singleValue.animate(new DecayAnimation(singleConfig), callback);
  };
  return maybeVectorAnim(value, config, decay) || {
    start: function start(callback) {
      _start3(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });
      _start3(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var sequence = function sequence(animations) {
  var current = 0;
  return {
    start: function start(callback) {
      var onComplete = function onComplete(result) {
        if (!result.finished) {
          callback && callback(result);
          return;
        }
        current++;
        if (current === animations.length) {
          callback && callback(result);
          return;
        }
        animations[current].start(onComplete);
      };
      if (animations.length === 0) {
        callback && callback({
          finished: true
        });
      } else {
        animations[current].start(onComplete);
      }
    },
    stop: function stop() {
      if (current < animations.length) {
        animations[current].stop();
      }
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        if (idx <= current) {
          animation.reset();
        }
      });
      current = 0;
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
};
var parallel = function parallel(animations, config) {
  var doneCount = 0;
  var hasEnded = {};
  var stopTogether = !(config && config.stopTogether === false);
  var result = {
    start: function start(callback) {
      if (doneCount === animations.length) {
        callback && callback({
          finished: true
        });
        return;
      }
      animations.forEach(function (animation, idx) {
        var cb = function cb(endResult) {
          hasEnded[idx] = true;
          doneCount++;
          if (doneCount === animations.length) {
            doneCount = 0;
            callback && callback(endResult);
            return;
          }
          if (!endResult.finished && stopTogether) {
            result.stop();
          }
        };
        if (!animation) {
          cb({
            finished: true
          });
        } else {
          animation.start(cb);
        }
      });
    },
    stop: function stop() {
      animations.forEach(function (animation, idx) {
        !hasEnded[idx] && animation.stop();
        hasEnded[idx] = true;
      });
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        animation.reset();
        hasEnded[idx] = false;
        doneCount = 0;
      });
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
  return result;
};
var delay = function delay(time) {
  return timing(new AnimatedValue(0), {
    toValue: 0,
    delay: time,
    duration: 0,
    useNativeDriver: false
  });
};
var stagger = function stagger(time, animations) {
  return parallel(animations.map(function (animation, i) {
    return sequence([delay(time * i), animation]);
  }));
};
var loop = function loop(animation) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$iterations = _ref.iterations,
    iterations = _ref$iterations === void 0 ? -1 : _ref$iterations,
    _ref$resetBeforeItera = _ref.resetBeforeIteration,
    resetBeforeIteration = _ref$resetBeforeItera === void 0 ? true : _ref$resetBeforeItera;
  var isFinished = false;
  var iterationsSoFar = 0;
  return {
    start: function start(callback) {
      var restart = function restart() {
        var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          finished: true
        };
        if (isFinished || iterationsSoFar === iterations || result.finished === false) {
          callback && callback(result);
        } else {
          iterationsSoFar++;
          resetBeforeIteration && animation.reset();
          animation.start(restart);
        }
      };
      if (!animation || iterations === 0) {
        callback && callback({
          finished: true
        });
      } else {
        if (animation._isUsingNativeDriver()) {
          animation._startNativeLoop(iterations);
        } else {
          restart();
        }
      }
    },
    stop: function stop() {
      isFinished = true;
      animation.stop();
    },
    reset: function reset() {
      iterationsSoFar = 0;
      isFinished = false;
      animation.reset();
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return animation._isUsingNativeDriver();
    }
  };
};
function forkEvent(event, listener) {
  if (!event) {
    return listener;
  } else if (event instanceof AnimatedEvent) {
    event.__addListener(listener);
    return event;
  } else {
    return function () {
      typeof event === 'function' && event.apply(void 0, arguments);
      listener.apply(void 0, arguments);
    };
  }
}
function unforkEvent(event, listener) {
  if (event && event instanceof AnimatedEvent) {
    event.__removeListener(listener);
  }
}
var event = function event(argMapping, config) {
  var animatedEvent = new AnimatedEvent(argMapping, config);
  if (animatedEvent.__isNative) {
    return animatedEvent;
  } else {
    return animatedEvent.__getHandler();
  }
};
module.exports = {
  Value: AnimatedValue,
  ValueXY: AnimatedValueXY,
  Color: _AnimatedColor.default,
  Interpolation: AnimatedInterpolation,
  Node: AnimatedNode,
  decay: decay,
  timing: timing,
  spring: spring,
  add: add,
  subtract: subtract,
  divide: divide,
  multiply: multiply,
  modulo: modulo,
  diffClamp: diffClamp,
  delay: delay,
  sequence: sequence,
  parallel: parallel,
  stagger: stagger,
  loop: loop,
  event: event,
  createAnimatedComponent: createAnimatedComponent,
  attachNativeEvent: attachNativeEvent,
  forkEvent: forkEvent,
  unforkEvent: unforkEvent,
  Event: AnimatedEvent
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9BbmltYXRlZENvbG9yIiwiX3JlcXVpcmUiLCJBbmltYXRlZEV2ZW50IiwiYXR0YWNoTmF0aXZlRXZlbnQiLCJBbmltYXRlZEFkZGl0aW9uIiwiQW5pbWF0ZWREaWZmQ2xhbXAiLCJBbmltYXRlZERpdmlzaW9uIiwiQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiQW5pbWF0ZWRNb2R1bG8iLCJBbmltYXRlZE11bHRpcGxpY2F0aW9uIiwiQW5pbWF0ZWROb2RlIiwiQW5pbWF0ZWRTdWJ0cmFjdGlvbiIsIkFuaW1hdGVkVHJhY2tpbmciLCJBbmltYXRlZFZhbHVlIiwiQW5pbWF0ZWRWYWx1ZVhZIiwiRGVjYXlBbmltYXRpb24iLCJTcHJpbmdBbmltYXRpb24iLCJUaW1pbmdBbmltYXRpb24iLCJjcmVhdGVBbmltYXRlZENvbXBvbmVudCIsImFkZCIsImEiLCJiIiwic3VidHJhY3QiLCJkaXZpZGUiLCJtdWx0aXBseSIsIm1vZHVsbyIsIm1vZHVsdXMiLCJkaWZmQ2xhbXAiLCJtaW4iLCJtYXgiLCJfY29tYmluZUNhbGxiYWNrcyIsImNhbGxiYWNrIiwiY29uZmlnIiwib25Db21wbGV0ZSIsImFwcGx5IiwiYXJndW1lbnRzIiwibWF5YmVWZWN0b3JBbmltIiwidmFsdWUiLCJhbmltIiwiY29uZmlnWCIsIk9iamVjdCIsImFzc2lnbiIsImNvbmZpZ1kiLCJrZXkiLCJfY29uZmlnJGtleSIsIngiLCJ5IiwidW5kZWZpbmVkIiwiYVgiLCJhWSIsInBhcmFsbGVsIiwic3RvcFRvZ2V0aGVyIiwiQW5pbWF0ZWRDb2xvciIsImNvbmZpZ1IiLCJjb25maWdHIiwiY29uZmlnQiIsImNvbmZpZ0EiLCJfY29uZmlnJF9rZXkiLCJyIiwiZyIsImFSIiwiYUciLCJhQiIsImFBIiwic3ByaW5nIiwic3RhcnQiLCJhbmltYXRlZFZhbHVlIiwiY29uZmlndXJhdGlvbiIsInNpbmdsZVZhbHVlIiwic2luZ2xlQ29uZmlnIiwic3RvcFRyYWNraW5nIiwidG9WYWx1ZSIsInRyYWNrIiwiYW5pbWF0ZSIsInN0b3AiLCJzdG9wQW5pbWF0aW9uIiwicmVzZXQiLCJyZXNldEFuaW1hdGlvbiIsIl9zdGFydE5hdGl2ZUxvb3AiLCJpdGVyYXRpb25zIiwiX2lzVXNpbmdOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJ0aW1pbmciLCJkZWNheSIsInNlcXVlbmNlIiwiYW5pbWF0aW9ucyIsImN1cnJlbnQiLCJyZXN1bHQiLCJmaW5pc2hlZCIsImxlbmd0aCIsImZvckVhY2giLCJhbmltYXRpb24iLCJpZHgiLCJFcnJvciIsImRvbmVDb3VudCIsImhhc0VuZGVkIiwiY2IiLCJlbmRSZXN1bHQiLCJkZWxheSIsInRpbWUiLCJkdXJhdGlvbiIsInN0YWdnZXIiLCJtYXAiLCJpIiwibG9vcCIsIl9yZWYiLCJfcmVmJGl0ZXJhdGlvbnMiLCJfcmVmJHJlc2V0QmVmb3JlSXRlcmEiLCJyZXNldEJlZm9yZUl0ZXJhdGlvbiIsImlzRmluaXNoZWQiLCJpdGVyYXRpb25zU29GYXIiLCJyZXN0YXJ0IiwiZm9ya0V2ZW50IiwiZXZlbnQiLCJsaXN0ZW5lciIsIl9fYWRkTGlzdGVuZXIiLCJ1bmZvcmtFdmVudCIsIl9fcmVtb3ZlTGlzdGVuZXIiLCJhcmdNYXBwaW5nIiwiYW5pbWF0ZWRFdmVudCIsIl9faXNOYXRpdmUiLCJfX2dldEhhbmRsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiVmFsdWUiLCJWYWx1ZVhZIiwiQ29sb3IiLCJJbnRlcnBvbGF0aW9uIiwiTm9kZSIsIkV2ZW50Il0sInNvdXJjZXMiOlsiQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IHtBbmltYXRlZEV2ZW50LCBhdHRhY2hOYXRpdmVFdmVudH0gPSByZXF1aXJlKCcuL0FuaW1hdGVkRXZlbnQnKTtcbmNvbnN0IEFuaW1hdGVkQWRkaXRpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkQWRkaXRpb24nKTtcbmNvbnN0IEFuaW1hdGVkRGlmZkNsYW1wID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZERpZmZDbGFtcCcpO1xuY29uc3QgQW5pbWF0ZWREaXZpc2lvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWREaXZpc2lvbicpO1xuY29uc3QgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZEludGVycG9sYXRpb24nKTtcbmNvbnN0IEFuaW1hdGVkTW9kdWxvID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZE1vZHVsbycpO1xuY29uc3QgQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbicpO1xuY29uc3QgQW5pbWF0ZWROb2RlID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZE5vZGUnKTtcbmNvbnN0IEFuaW1hdGVkU3VidHJhY3Rpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkU3VidHJhY3Rpb24nKTtcbmNvbnN0IEFuaW1hdGVkVHJhY2tpbmcgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkVHJhY2tpbmcnKTtcbmNvbnN0IEFuaW1hdGVkVmFsdWUgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkVmFsdWUnKTtcbmNvbnN0IEFuaW1hdGVkVmFsdWVYWSA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRWYWx1ZVhZJyk7XG5jb25zdCBEZWNheUFuaW1hdGlvbiA9IHJlcXVpcmUoJy4vYW5pbWF0aW9ucy9EZWNheUFuaW1hdGlvbicpO1xuY29uc3QgU3ByaW5nQW5pbWF0aW9uID0gcmVxdWlyZSgnLi9hbmltYXRpb25zL1NwcmluZ0FuaW1hdGlvbicpO1xuY29uc3QgVGltaW5nQW5pbWF0aW9uID0gcmVxdWlyZSgnLi9hbmltYXRpb25zL1RpbWluZ0FuaW1hdGlvbicpO1xuXG5jb25zdCBjcmVhdGVBbmltYXRlZENvbXBvbmVudCA9IHJlcXVpcmUoJy4vY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQnKTtcblxuaW1wb3J0IHR5cGUge1xuICBBbmltYXRpb25Db25maWcsXG4gIEVuZENhbGxiYWNrLFxuICBFbmRSZXN1bHQsXG59IGZyb20gJy4vYW5pbWF0aW9ucy9BbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge1RpbWluZ0FuaW1hdGlvbkNvbmZpZ30gZnJvbSAnLi9hbmltYXRpb25zL1RpbWluZ0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7RGVjYXlBbmltYXRpb25Db25maWd9IGZyb20gJy4vYW5pbWF0aW9ucy9EZWNheUFuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7U3ByaW5nQW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvU3ByaW5nQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtNYXBwaW5nLCBFdmVudENvbmZpZ30gZnJvbSAnLi9BbmltYXRlZEV2ZW50JztcblxuaW1wb3J0IEFuaW1hdGVkQ29sb3IgZnJvbSAnLi9ub2Rlcy9BbmltYXRlZENvbG9yJztcblxuZXhwb3J0IHR5cGUgQ29tcG9zaXRlQW5pbWF0aW9uID0ge1xuICBzdGFydDogKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKSA9PiB2b2lkLFxuICBzdG9wOiAoKSA9PiB2b2lkLFxuICByZXNldDogKCkgPT4gdm9pZCxcbiAgX3N0YXJ0TmF0aXZlTG9vcDogKGl0ZXJhdGlvbnM/OiBudW1iZXIpID0+IHZvaWQsXG4gIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiAoKSA9PiBib29sZWFuLFxuICAuLi5cbn07XG5cbmNvbnN0IGFkZCA9IGZ1bmN0aW9uIChcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZEFkZGl0aW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZEFkZGl0aW9uKGEsIGIpO1xufTtcblxuY29uc3Qgc3VidHJhY3QgPSBmdW5jdGlvbiAoXG4gIGE6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbiAgYjogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuKTogQW5pbWF0ZWRTdWJ0cmFjdGlvbiB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWRTdWJ0cmFjdGlvbihhLCBiKTtcbn07XG5cbmNvbnN0IGRpdmlkZSA9IGZ1bmN0aW9uIChcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZERpdmlzaW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZERpdmlzaW9uKGEsIGIpO1xufTtcblxuY29uc3QgbXVsdGlwbHkgPSBmdW5jdGlvbiAoXG4gIGE6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbiAgYjogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuKTogQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbiB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbihhLCBiKTtcbn07XG5cbmNvbnN0IG1vZHVsbyA9IGZ1bmN0aW9uIChhOiBBbmltYXRlZE5vZGUsIG1vZHVsdXM6IG51bWJlcik6IEFuaW1hdGVkTW9kdWxvIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZE1vZHVsbyhhLCBtb2R1bHVzKTtcbn07XG5cbmNvbnN0IGRpZmZDbGFtcCA9IGZ1bmN0aW9uIChcbiAgYTogQW5pbWF0ZWROb2RlLFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4pOiBBbmltYXRlZERpZmZDbGFtcCB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWREaWZmQ2xhbXAoYSwgbWluLCBtYXgpO1xufTtcblxuY29uc3QgX2NvbWJpbmVDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gIGNhbGxiYWNrOiA/RW5kQ2FsbGJhY2ssXG4gIGNvbmZpZzogey4uLkFuaW1hdGlvbkNvbmZpZywgLi4ufSxcbikge1xuICBpZiAoY2FsbGJhY2sgJiYgY29uZmlnLm9uQ29tcGxldGUpIHtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGNvbmZpZy5vbkNvbXBsZXRlICYmIGNvbmZpZy5vbkNvbXBsZXRlKC4uLmFyZ3MpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2FsbGJhY2sgfHwgY29uZmlnLm9uQ29tcGxldGU7XG4gIH1cbn07XG5cbmNvbnN0IG1heWJlVmVjdG9yQW5pbSA9IGZ1bmN0aW9uIChcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICBjb25maWc6IE9iamVjdCxcbiAgYW5pbTogKHZhbHVlOiBBbmltYXRlZFZhbHVlLCBjb25maWc6IE9iamVjdCkgPT4gQ29tcG9zaXRlQW5pbWF0aW9uLFxuKTogP0NvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkVmFsdWVYWSkge1xuICAgIGNvbnN0IGNvbmZpZ1ggPSB7Li4uY29uZmlnfTtcbiAgICBjb25zdCBjb25maWdZID0gey4uLmNvbmZpZ307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29uZmlnKSB7XG4gICAgICBjb25zdCB7eCwgeX0gPSBjb25maWdba2V5XTtcbiAgICAgIGlmICh4ICE9PSB1bmRlZmluZWQgJiYgeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbmZpZ1hba2V5XSA9IHg7XG4gICAgICAgIGNvbmZpZ1lba2V5XSA9IHk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFYID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkVmFsdWVYWSkueCwgY29uZmlnWCk7XG4gICAgY29uc3QgYVkgPSBhbmltKCh2YWx1ZTogQW5pbWF0ZWRWYWx1ZVhZKS55LCBjb25maWdZKTtcbiAgICAvLyBXZSB1c2UgYHN0b3BUb2dldGhlcjogZmFsc2VgIGhlcmUgYmVjYXVzZSBvdGhlcndpc2UgdHJhY2tpbmcgd2lsbCBicmVha1xuICAgIC8vIGJlY2F1c2UgdGhlIHNlY29uZCBhbmltYXRpb24gd2lsbCBnZXQgc3RvcHBlZCBiZWZvcmUgaXQgY2FuIHVwZGF0ZS5cbiAgICByZXR1cm4gcGFyYWxsZWwoW2FYLCBhWV0sIHtzdG9wVG9nZXRoZXI6IGZhbHNlfSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZENvbG9yKSB7XG4gICAgY29uc3QgY29uZmlnUiA9IHsuLi5jb25maWd9O1xuICAgIGNvbnN0IGNvbmZpZ0cgPSB7Li4uY29uZmlnfTtcbiAgICBjb25zdCBjb25maWdCID0gey4uLmNvbmZpZ307XG4gICAgY29uc3QgY29uZmlnQSA9IHsuLi5jb25maWd9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZykge1xuICAgICAgY29uc3Qge3IsIGcsIGIsIGF9ID0gY29uZmlnW2tleV07XG4gICAgICBpZiAoXG4gICAgICAgIHIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBnICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgYiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGEgIT09IHVuZGVmaW5lZFxuICAgICAgKSB7XG4gICAgICAgIGNvbmZpZ1Jba2V5XSA9IHI7XG4gICAgICAgIGNvbmZpZ0dba2V5XSA9IGc7XG4gICAgICAgIGNvbmZpZ0Jba2V5XSA9IGI7XG4gICAgICAgIGNvbmZpZ0Fba2V5XSA9IGE7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFSID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkQ29sb3IpLnIsIGNvbmZpZ1IpO1xuICAgIGNvbnN0IGFHID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkQ29sb3IpLmcsIGNvbmZpZ0cpO1xuICAgIGNvbnN0IGFCID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkQ29sb3IpLmIsIGNvbmZpZ0IpO1xuICAgIGNvbnN0IGFBID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkQ29sb3IpLmEsIGNvbmZpZ0EpO1xuICAgIC8vIFdlIHVzZSBgc3RvcFRvZ2V0aGVyOiBmYWxzZWAgaGVyZSBiZWNhdXNlIG90aGVyd2lzZSB0cmFja2luZyB3aWxsIGJyZWFrXG4gICAgLy8gYmVjYXVzZSB0aGUgc2Vjb25kIGFuaW1hdGlvbiB3aWxsIGdldCBzdG9wcGVkIGJlZm9yZSBpdCBjYW4gdXBkYXRlLlxuICAgIHJldHVybiBwYXJhbGxlbChbYVIsIGFHLCBhQiwgYUFdLCB7c3RvcFRvZ2V0aGVyOiBmYWxzZX0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuY29uc3Qgc3ByaW5nID0gZnVuY3Rpb24gKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSB8IEFuaW1hdGVkQ29sb3IsXG4gIGNvbmZpZzogU3ByaW5nQW5pbWF0aW9uQ29uZmlnLFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgY29uc3Qgc3RhcnQgPSBmdW5jdGlvbiAoXG4gICAgYW5pbWF0ZWRWYWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSB8IEFuaW1hdGVkQ29sb3IsXG4gICAgY29uZmlndXJhdGlvbjogU3ByaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBTcHJpbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgU3ByaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiAoXG4gICAgbWF5YmVWZWN0b3JBbmltKHZhbHVlLCBjb25maWcsIHNwcmluZykgfHwge1xuICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChjYWxsYmFjaz86ID9FbmRDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBzdGFydCh2YWx1ZSwgY29uZmlnLCBjYWxsYmFjayk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnN0b3BBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnJlc2V0QW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbiAoaXRlcmF0aW9ucz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBzaW5nbGVDb25maWcgPSB7Li4uY29uZmlnLCBpdGVyYXRpb25zfTtcbiAgICAgICAgc3RhcnQodmFsdWUsIHNpbmdsZUNvbmZpZyk7XG4gICAgICB9LFxuXG4gICAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29uZmlnLnVzZU5hdGl2ZURyaXZlciB8fCBmYWxzZTtcbiAgICAgIH0sXG4gICAgfVxuICApO1xufTtcblxuY29uc3QgdGltaW5nID0gZnVuY3Rpb24gKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSB8IEFuaW1hdGVkQ29sb3IsXG4gIGNvbmZpZzogVGltaW5nQW5pbWF0aW9uQ29uZmlnLFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgY29uc3Qgc3RhcnQgPSBmdW5jdGlvbiAoXG4gICAgYW5pbWF0ZWRWYWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSB8IEFuaW1hdGVkQ29sb3IsXG4gICAgY29uZmlndXJhdGlvbjogVGltaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBUaW1pbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgVGltaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgdGltaW5nKSB8fCB7XG4gICAgICBzdGFydDogZnVuY3Rpb24gKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBjb25maWcsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3A6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUucmVzZXRBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uIChpdGVyYXRpb25zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNvbmZpZyA9IHsuLi5jb25maWcsIGl0ZXJhdGlvbnN9O1xuICAgICAgICBzdGFydCh2YWx1ZSwgc2luZ2xlQ29uZmlnKTtcbiAgICAgIH0sXG5cbiAgICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBkZWNheSA9IGZ1bmN0aW9uIChcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICBjb25maWc6IERlY2F5QW5pbWF0aW9uQ29uZmlnLFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgY29uc3Qgc3RhcnQgPSBmdW5jdGlvbiAoXG4gICAgYW5pbWF0ZWRWYWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSB8IEFuaW1hdGVkQ29sb3IsXG4gICAgY29uZmlndXJhdGlvbjogRGVjYXlBbmltYXRpb25Db25maWcsXG4gICAgY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2ssXG4gICk6IHZvaWQge1xuICAgIGNhbGxiYWNrID0gX2NvbWJpbmVDYWxsYmFja3MoY2FsbGJhY2ssIGNvbmZpZ3VyYXRpb24pO1xuICAgIGNvbnN0IHNpbmdsZVZhbHVlOiBhbnkgPSBhbmltYXRlZFZhbHVlO1xuICAgIGNvbnN0IHNpbmdsZUNvbmZpZzogYW55ID0gY29uZmlndXJhdGlvbjtcbiAgICBzaW5nbGVWYWx1ZS5zdG9wVHJhY2tpbmcoKTtcbiAgICBzaW5nbGVWYWx1ZS5hbmltYXRlKG5ldyBEZWNheUFuaW1hdGlvbihzaW5nbGVDb25maWcpLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgZGVjYXkpIHx8IHtcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgc3RhcnQodmFsdWUsIGNvbmZpZywgY2FsbGJhY2spO1xuICAgICAgfSxcblxuICAgICAgc3RvcDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICByZXNldDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5yZXNldEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24gKGl0ZXJhdGlvbnM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ29uZmlnID0gey4uLmNvbmZpZywgaXRlcmF0aW9uc307XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBzaW5nbGVDb25maWcpO1xuICAgICAgfSxcblxuICAgICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn07XG5cbmNvbnN0IHNlcXVlbmNlID0gZnVuY3Rpb24gKFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgbGV0IGN1cnJlbnQgPSAwO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9uQ29tcGxldGUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlmICghcmVzdWx0LmZpbmlzaGVkKSB7XG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50Kys7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IGFuaW1hdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRdLnN0YXJ0KG9uQ29tcGxldGUpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGFuaW1hdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50XS5zdGFydChvbkNvbXBsZXRlKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGN1cnJlbnQgPCBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRdLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgaWYgKGlkeCA8PSBjdXJyZW50KSB7XG4gICAgICAgICAgYW5pbWF0aW9uLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY3VycmVudCA9IDA7XG4gICAgfSxcblxuICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0xvb3BzIHJ1biB1c2luZyB0aGUgbmF0aXZlIGRyaXZlciBjYW5ub3QgY29udGFpbiBBbmltYXRlZC5zZXF1ZW5jZSBhbmltYXRpb25zJyxcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfTtcbn07XG5cbnR5cGUgUGFyYWxsZWxDb25maWcgPSB7XG4gIC8vIElmIG9uZSBpcyBzdG9wcGVkLCBzdG9wIGFsbC4gIGRlZmF1bHQ6IHRydWVcbiAgc3RvcFRvZ2V0aGVyPzogYm9vbGVhbixcbiAgLi4uXG59O1xuY29uc3QgcGFyYWxsZWwgPSBmdW5jdGlvbiAoXG4gIGFuaW1hdGlvbnM6IEFycmF5PENvbXBvc2l0ZUFuaW1hdGlvbj4sXG4gIGNvbmZpZz86ID9QYXJhbGxlbENvbmZpZyxcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGxldCBkb25lQ291bnQgPSAwO1xuICAvLyBNYWtlIHN1cmUgd2Ugb25seSBjYWxsIHN0b3AoKSBhdCBtb3N0IG9uY2UgZm9yIGVhY2ggYW5pbWF0aW9uXG4gIGNvbnN0IGhhc0VuZGVkID0ge307XG4gIGNvbnN0IHN0b3BUb2dldGhlciA9ICEoY29uZmlnICYmIGNvbmZpZy5zdG9wVG9nZXRoZXIgPT09IGZhbHNlKTtcblxuICBjb25zdCByZXN1bHQgPSB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uIChjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgaWYgKGRvbmVDb3VudCA9PT0gYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soe2ZpbmlzaGVkOiB0cnVlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBjb25zdCBjYiA9IGZ1bmN0aW9uIChlbmRSZXN1bHQpIHtcbiAgICAgICAgICBoYXNFbmRlZFtpZHhdID0gdHJ1ZTtcbiAgICAgICAgICBkb25lQ291bnQrKztcbiAgICAgICAgICBpZiAoZG9uZUNvdW50ID09PSBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgZG9uZUNvdW50ID0gMDtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVuZFJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFlbmRSZXN1bHQuZmluaXNoZWQgJiYgc3RvcFRvZ2V0aGVyKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWFuaW1hdGlvbikge1xuICAgICAgICAgIGNiKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFuaW1hdGlvbi5zdGFydChjYik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBhbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgICFoYXNFbmRlZFtpZHhdICYmIGFuaW1hdGlvbi5zdG9wKCk7XG4gICAgICAgIGhhc0VuZGVkW2lkeF0gPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBhbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgIGFuaW1hdGlvbi5yZXNldCgpO1xuICAgICAgICBoYXNFbmRlZFtpZHhdID0gZmFsc2U7XG4gICAgICAgIGRvbmVDb3VudCA9IDA7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnTG9vcHMgcnVuIHVzaW5nIHRoZSBuYXRpdmUgZHJpdmVyIGNhbm5vdCBjb250YWluIEFuaW1hdGVkLnBhcmFsbGVsIGFuaW1hdGlvbnMnLFxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5jb25zdCBkZWxheSA9IGZ1bmN0aW9uICh0aW1lOiBudW1iZXIpOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICAvLyBXb3VsZCBiZSBuaWNlIHRvIG1ha2UgYSBzcGVjaWFsaXplZCBpbXBsZW1lbnRhdGlvblxuICByZXR1cm4gdGltaW5nKG5ldyBBbmltYXRlZFZhbHVlKDApLCB7XG4gICAgdG9WYWx1ZTogMCxcbiAgICBkZWxheTogdGltZSxcbiAgICBkdXJhdGlvbjogMCxcbiAgICB1c2VOYXRpdmVEcml2ZXI6IGZhbHNlLFxuICB9KTtcbn07XG5cbmNvbnN0IHN0YWdnZXIgPSBmdW5jdGlvbiAoXG4gIHRpbWU6IG51bWJlcixcbiAgYW5pbWF0aW9uczogQXJyYXk8Q29tcG9zaXRlQW5pbWF0aW9uPixcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIHJldHVybiBwYXJhbGxlbChcbiAgICBhbmltYXRpb25zLm1hcCgoYW5pbWF0aW9uLCBpKSA9PiB7XG4gICAgICByZXR1cm4gc2VxdWVuY2UoW2RlbGF5KHRpbWUgKiBpKSwgYW5pbWF0aW9uXSk7XG4gICAgfSksXG4gICk7XG59O1xuXG50eXBlIExvb3BBbmltYXRpb25Db25maWcgPSB7XG4gIGl0ZXJhdGlvbnM6IG51bWJlcixcbiAgcmVzZXRCZWZvcmVJdGVyYXRpb24/OiBib29sZWFuLFxuICAuLi5cbn07XG5cbmNvbnN0IGxvb3AgPSBmdW5jdGlvbiAoXG4gIGFuaW1hdGlvbjogQ29tcG9zaXRlQW5pbWF0aW9uLFxuICB7aXRlcmF0aW9ucyA9IC0xLCByZXNldEJlZm9yZUl0ZXJhdGlvbiA9IHRydWV9OiBMb29wQW5pbWF0aW9uQ29uZmlnID0ge30sXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBsZXQgaXNGaW5pc2hlZCA9IGZhbHNlO1xuICBsZXQgaXRlcmF0aW9uc1NvRmFyID0gMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogZnVuY3Rpb24gKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKSB7XG4gICAgICBjb25zdCByZXN0YXJ0ID0gZnVuY3Rpb24gKHJlc3VsdDogRW5kUmVzdWx0ID0ge2ZpbmlzaGVkOiB0cnVlfSk6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNGaW5pc2hlZCB8fFxuICAgICAgICAgIGl0ZXJhdGlvbnNTb0ZhciA9PT0gaXRlcmF0aW9ucyB8fFxuICAgICAgICAgIHJlc3VsdC5maW5pc2hlZCA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVyYXRpb25zU29GYXIrKztcbiAgICAgICAgICByZXNldEJlZm9yZUl0ZXJhdGlvbiAmJiBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgICBhbmltYXRpb24uc3RhcnQocmVzdGFydCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAoIWFuaW1hdGlvbiB8fCBpdGVyYXRpb25zID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbi5faXNVc2luZ05hdGl2ZURyaXZlcigpKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLl9zdGFydE5hdGl2ZUxvb3AoaXRlcmF0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdGFydCgpOyAvLyBTdGFydCBsb29waW5nIHJlY3Vyc2l2ZWx5IG9uIHRoZSBqcyB0aHJlYWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBpc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIGFuaW1hdGlvbi5zdG9wKCk7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBpdGVyYXRpb25zU29GYXIgPSAwO1xuICAgICAgaXNGaW5pc2hlZCA9IGZhbHNlO1xuICAgICAgYW5pbWF0aW9uLnJlc2V0KCk7XG4gICAgfSxcblxuICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0xvb3BzIHJ1biB1c2luZyB0aGUgbmF0aXZlIGRyaXZlciBjYW5ub3QgY29udGFpbiBBbmltYXRlZC5sb29wIGFuaW1hdGlvbnMnLFxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBhbmltYXRpb24uX2lzVXNpbmdOYXRpdmVEcml2ZXIoKTtcbiAgICB9LFxuICB9O1xufTtcblxuZnVuY3Rpb24gZm9ya0V2ZW50KFxuICBldmVudDogP0FuaW1hdGVkRXZlbnQgfCA/RnVuY3Rpb24sXG4gIGxpc3RlbmVyOiBGdW5jdGlvbixcbik6IEFuaW1hdGVkRXZlbnQgfCBGdW5jdGlvbiB7XG4gIGlmICghZXZlbnQpIHtcbiAgICByZXR1cm4gbGlzdGVuZXI7XG4gIH0gZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50KSB7XG4gICAgZXZlbnQuX19hZGRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgdHlwZW9mIGV2ZW50ID09PSAnZnVuY3Rpb24nICYmIGV2ZW50KC4uLmFyZ3MpO1xuICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bmZvcmtFdmVudChcbiAgZXZlbnQ6ID9BbmltYXRlZEV2ZW50IHwgP0Z1bmN0aW9uLFxuICBsaXN0ZW5lcjogRnVuY3Rpb24sXG4pOiB2b2lkIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50IGluc3RhbmNlb2YgQW5pbWF0ZWRFdmVudCkge1xuICAgIGV2ZW50Ll9fcmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xuICB9XG59XG5cbmNvbnN0IGV2ZW50ID0gZnVuY3Rpb24gKFxuICBhcmdNYXBwaW5nOiAkUmVhZE9ubHlBcnJheTw/TWFwcGluZz4sXG4gIGNvbmZpZzogRXZlbnRDb25maWcsXG4pOiBhbnkge1xuICBjb25zdCBhbmltYXRlZEV2ZW50ID0gbmV3IEFuaW1hdGVkRXZlbnQoYXJnTWFwcGluZywgY29uZmlnKTtcbiAgaWYgKGFuaW1hdGVkRXZlbnQuX19pc05hdGl2ZSkge1xuICAgIHJldHVybiBhbmltYXRlZEV2ZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhbmltYXRlZEV2ZW50Ll9fZ2V0SGFuZGxlcigpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBgQW5pbWF0ZWRgIGxpYnJhcnkgaXMgZGVzaWduZWQgdG8gbWFrZSBhbmltYXRpb25zIGZsdWlkLCBwb3dlcmZ1bCwgYW5kXG4gKiBlYXN5IHRvIGJ1aWxkIGFuZCBtYWludGFpbi4gYEFuaW1hdGVkYCBmb2N1c2VzIG9uIGRlY2xhcmF0aXZlIHJlbGF0aW9uc2hpcHNcbiAqIGJldHdlZW4gaW5wdXRzIGFuZCBvdXRwdXRzLCB3aXRoIGNvbmZpZ3VyYWJsZSB0cmFuc2Zvcm1zIGluIGJldHdlZW4sIGFuZFxuICogc2ltcGxlIGBzdGFydGAvYHN0b3BgIG1ldGhvZHMgdG8gY29udHJvbCB0aW1lLWJhc2VkIGFuaW1hdGlvbiBleGVjdXRpb24uXG4gKiBJZiBhZGRpdGlvbmFsIHRyYW5zZm9ybXMgYXJlIGFkZGVkLCBiZSBzdXJlIHRvIGluY2x1ZGUgdGhlbSBpblxuICogQW5pbWF0ZWRNb2NrLmpzIGFzIHdlbGwuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8qKlxuICAgKiBTdGFuZGFyZCB2YWx1ZSBjbGFzcyBmb3IgZHJpdmluZyBhbmltYXRpb25zLiAgVHlwaWNhbGx5IGluaXRpYWxpemVkIHdpdGhcbiAgICogYG5ldyBBbmltYXRlZC5WYWx1ZSgwKTtgXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3ZhbHVlXG4gICAqL1xuICBWYWx1ZTogQW5pbWF0ZWRWYWx1ZSxcbiAgLyoqXG4gICAqIDJEIHZhbHVlIGNsYXNzIGZvciBkcml2aW5nIDJEIGFuaW1hdGlvbnMsIHN1Y2ggYXMgcGFuIGdlc3R1cmVzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVleHlcbiAgICovXG4gIFZhbHVlWFk6IEFuaW1hdGVkVmFsdWVYWSxcbiAgLyoqXG4gICAqIFZhbHVlIGNsYXNzIGZvciBkcml2aW5nIGNvbG9yIGFuaW1hdGlvbnMuXG4gICAqL1xuICBDb2xvcjogQW5pbWF0ZWRDb2xvcixcbiAgLyoqXG4gICAqIEV4cG9ydGVkIHRvIHVzZSB0aGUgSW50ZXJwb2xhdGlvbiB0eXBlIGluIGZsb3cuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2ludGVycG9sYXRpb25cbiAgICovXG4gIEludGVycG9sYXRpb246IEFuaW1hdGVkSW50ZXJwb2xhdGlvbixcbiAgLyoqXG4gICAqIEV4cG9ydGVkIGZvciBlYXNlIG9mIHR5cGUgY2hlY2tpbmcuIEFsbCBhbmltYXRlZCB2YWx1ZXMgZGVyaXZlIGZyb20gdGhpc1xuICAgKiBjbGFzcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjbm9kZVxuICAgKi9cbiAgTm9kZTogQW5pbWF0ZWROb2RlLFxuXG4gIC8qKlxuICAgKiBBbmltYXRlcyBhIHZhbHVlIGZyb20gYW4gaW5pdGlhbCB2ZWxvY2l0eSB0byB6ZXJvIGJhc2VkIG9uIGEgZGVjYXlcbiAgICogY29lZmZpY2llbnQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2RlY2F5XG4gICAqL1xuICBkZWNheSxcbiAgLyoqXG4gICAqIEFuaW1hdGVzIGEgdmFsdWUgYWxvbmcgYSB0aW1lZCBlYXNpbmcgY3VydmUuIFRoZSBFYXNpbmcgbW9kdWxlIGhhcyB0b25zIG9mXG4gICAqIHByZWRlZmluZWQgY3VydmVzLCBvciB5b3UgY2FuIHVzZSB5b3VyIG93biBmdW5jdGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjdGltaW5nXG4gICAqL1xuICB0aW1pbmcsXG4gIC8qKlxuICAgKiBBbmltYXRlcyBhIHZhbHVlIGFjY29yZGluZyB0byBhbiBhbmFseXRpY2FsIHNwcmluZyBtb2RlbCBiYXNlZCBvblxuICAgKiBkYW1wZWQgaGFybW9uaWMgb3NjaWxsYXRpb24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3NwcmluZ1xuICAgKi9cbiAgc3ByaW5nLFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGZyb20gdHdvIEFuaW1hdGVkIHZhbHVlcyBhZGRlZFxuICAgKiB0b2dldGhlci5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjYWRkXG4gICAqL1xuICBhZGQsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgYnkgc3VidHJhY3RpbmcgdGhlIHNlY29uZCBBbmltYXRlZFxuICAgKiB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBBbmltYXRlZCB2YWx1ZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjc3VidHJhY3RcbiAgICovXG4gIHN1YnRyYWN0LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGJ5IGRpdmlkaW5nIHRoZSBmaXJzdCBBbmltYXRlZCB2YWx1ZVxuICAgKiBieSB0aGUgc2Vjb25kIEFuaW1hdGVkIHZhbHVlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNkaXZpZGVcbiAgICovXG4gIGRpdmlkZSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSBjb21wb3NlZCBmcm9tIHR3byBBbmltYXRlZCB2YWx1ZXMgbXVsdGlwbGllZFxuICAgKiB0b2dldGhlci5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjbXVsdGlwbHlcbiAgICovXG4gIG11bHRpcGx5LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIHRoYXQgaXMgdGhlIChub24tbmVnYXRpdmUpIG1vZHVsbyBvZiB0aGVcbiAgICogcHJvdmlkZWQgQW5pbWF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI21vZHVsb1xuICAgKi9cbiAgbW9kdWxvLFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgdGhhdCBpcyBsaW1pdGVkIGJldHdlZW4gMiB2YWx1ZXMuIEl0IHVzZXMgdGhlXG4gICAqIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgbGFzdCB2YWx1ZSBzbyBldmVuIGlmIHRoZSB2YWx1ZSBpcyBmYXIgZnJvbSB0aGVcbiAgICogYm91bmRzIGl0IHdpbGwgc3RhcnQgY2hhbmdpbmcgd2hlbiB0aGUgdmFsdWUgc3RhcnRzIGdldHRpbmcgY2xvc2VyIGFnYWluLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNkaWZmY2xhbXBcbiAgICovXG4gIGRpZmZDbGFtcCxcblxuICAvKipcbiAgICogU3RhcnRzIGFuIGFuaW1hdGlvbiBhZnRlciB0aGUgZ2l2ZW4gZGVsYXkuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2RlbGF5XG4gICAqL1xuICBkZWxheSxcbiAgLyoqXG4gICAqIFN0YXJ0cyBhbiBhcnJheSBvZiBhbmltYXRpb25zIGluIG9yZGVyLCB3YWl0aW5nIGZvciBlYWNoIHRvIGNvbXBsZXRlXG4gICAqIGJlZm9yZSBzdGFydGluZyB0aGUgbmV4dC4gSWYgdGhlIGN1cnJlbnQgcnVubmluZyBhbmltYXRpb24gaXMgc3RvcHBlZCwgbm9cbiAgICogZm9sbG93aW5nIGFuaW1hdGlvbnMgd2lsbCBiZSBzdGFydGVkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNzZXF1ZW5jZVxuICAgKi9cbiAgc2VxdWVuY2UsXG4gIC8qKlxuICAgKiBTdGFydHMgYW4gYXJyYXkgb2YgYW5pbWF0aW9ucyBhbGwgYXQgdGhlIHNhbWUgdGltZS4gQnkgZGVmYXVsdCwgaWYgb25lXG4gICAqIG9mIHRoZSBhbmltYXRpb25zIGlzIHN0b3BwZWQsIHRoZXkgd2lsbCBhbGwgYmUgc3RvcHBlZC4gWW91IGNhbiBvdmVycmlkZVxuICAgKiB0aGlzIHdpdGggdGhlIGBzdG9wVG9nZXRoZXJgIGZsYWcuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3BhcmFsbGVsXG4gICAqL1xuICBwYXJhbGxlbCxcbiAgLyoqXG4gICAqIEFycmF5IG9mIGFuaW1hdGlvbnMgbWF5IHJ1biBpbiBwYXJhbGxlbCAob3ZlcmxhcCksIGJ1dCBhcmUgc3RhcnRlZCBpblxuICAgKiBzZXF1ZW5jZSB3aXRoIHN1Y2Nlc3NpdmUgZGVsYXlzLiAgTmljZSBmb3IgZG9pbmcgdHJhaWxpbmcgZWZmZWN0cy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjc3RhZ2dlclxuICAgKi9cbiAgc3RhZ2dlcixcbiAgLyoqXG4gICAqIExvb3BzIGEgZ2l2ZW4gYW5pbWF0aW9uIGNvbnRpbnVvdXNseSwgc28gdGhhdCBlYWNoIHRpbWUgaXQgcmVhY2hlcyB0aGVcbiAgICogZW5kLCBpdCByZXNldHMgYW5kIGJlZ2lucyBhZ2FpbiBmcm9tIHRoZSBzdGFydC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjbG9vcFxuICAgKi9cbiAgbG9vcCxcblxuICAvKipcbiAgICogVGFrZXMgYW4gYXJyYXkgb2YgbWFwcGluZ3MgYW5kIGV4dHJhY3RzIHZhbHVlcyBmcm9tIGVhY2ggYXJnIGFjY29yZGluZ2x5LFxuICAgKiB0aGVuIGNhbGxzIGBzZXRWYWx1ZWAgb24gdGhlIG1hcHBlZCBvdXRwdXRzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNldmVudFxuICAgKi9cbiAgZXZlbnQsXG5cbiAgLyoqXG4gICAqIE1ha2UgYW55IFJlYWN0IGNvbXBvbmVudCBBbmltYXRhYmxlLiAgVXNlZCB0byBjcmVhdGUgYEFuaW1hdGVkLlZpZXdgLCBldGMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2NyZWF0ZWFuaW1hdGVkY29tcG9uZW50XG4gICAqL1xuICBjcmVhdGVBbmltYXRlZENvbXBvbmVudCxcblxuICAvKipcbiAgICogSW1wZXJhdGl2ZSBBUEkgdG8gYXR0YWNoIGFuIGFuaW1hdGVkIHZhbHVlIHRvIGFuIGV2ZW50IG9uIGEgdmlldy4gUHJlZmVyXG4gICAqIHVzaW5nIGBBbmltYXRlZC5ldmVudGAgd2l0aCBgdXNlTmF0aXZlRHJpdmU6IHRydWVgIGlmIHBvc3NpYmxlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNhdHRhY2huYXRpdmVldmVudFxuICAgKi9cbiAgYXR0YWNoTmF0aXZlRXZlbnQsXG5cbiAgLyoqXG4gICAqIEFkdmFuY2VkIGltcGVyYXRpdmUgQVBJIGZvciBzbm9vcGluZyBvbiBhbmltYXRlZCBldmVudHMgdGhhdCBhcmUgcGFzc2VkIGluXG4gICAqIHRocm91Z2ggcHJvcHMuIFVzZSB2YWx1ZXMgZGlyZWN0bHkgd2hlcmUgcG9zc2libGUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2ZvcmtldmVudFxuICAgKi9cbiAgZm9ya0V2ZW50LFxuICB1bmZvcmtFdmVudCxcblxuICAvKipcbiAgICogRXhwb3NlIEV2ZW50IGNsYXNzLCBzbyBpdCBjYW4gYmUgdXNlZCBhcyBhIHR5cGUgZm9yIHR5cGUgY2hlY2tlcnMuXG4gICAqL1xuICBFdmVudDogQW5pbWF0ZWRFdmVudCxcbn07XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQThCYixJQUFBQyxjQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUE1QkEsSUFBQUUsUUFBQSxHQUEyQ0YsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0VBQTlERyxhQUFhLEdBQUFELFFBQUEsQ0FBYkMsYUFBYTtFQUFFQyxpQkFBaUIsR0FBQUYsUUFBQSxDQUFqQkUsaUJBQWlCO0FBQ3ZDLElBQU1DLGdCQUFnQixHQUFHTCxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDNUQsSUFBTU0saUJBQWlCLEdBQUdOLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUM5RCxJQUFNTyxnQkFBZ0IsR0FBR1AsT0FBTyxDQUFDLDBCQUEwQixDQUFDO0FBQzVELElBQU1RLHFCQUFxQixHQUFHUixPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDdEUsSUFBTVMsY0FBYyxHQUFHVCxPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDeEQsSUFBTVUsc0JBQXNCLEdBQUdWLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUN4RSxJQUFNVyxZQUFZLEdBQUdYLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNwRCxJQUFNWSxtQkFBbUIsR0FBR1osT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQ2xFLElBQU1hLGdCQUFnQixHQUFHYixPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDNUQsSUFBTWMsYUFBYSxHQUFHZCxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDdEQsSUFBTWUsZUFBZSxHQUFHZixPQUFPLENBQUMseUJBQXlCLENBQUM7QUFDMUQsSUFBTWdCLGNBQWMsR0FBR2hCLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUM3RCxJQUFNaUIsZUFBZSxHQUFHakIsT0FBTyxDQUFDLDhCQUE4QixDQUFDO0FBQy9ELElBQU1rQixlQUFlLEdBQUdsQixPQUFPLENBQUMsOEJBQThCLENBQUM7QUFFL0QsSUFBTW1CLHVCQUF1QixHQUFHbkIsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBdUJwRSxJQUFNb0IsR0FBRyxHQUFHLFNBQU5BLEdBQUdBLENBQ1BDLENBQXdCLEVBQ3hCQyxDQUF3QixFQUNOO0VBQ2xCLE9BQU8sSUFBSWpCLGdCQUFnQixDQUFDZ0IsQ0FBQyxFQUFFQyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUVELElBQU1DLFFBQVEsR0FBRyxTQUFYQSxRQUFRQSxDQUNaRixDQUF3QixFQUN4QkMsQ0FBd0IsRUFDSDtFQUNyQixPQUFPLElBQUlWLG1CQUFtQixDQUFDUyxDQUFDLEVBQUVDLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBRUQsSUFBTUUsTUFBTSxHQUFHLFNBQVRBLE1BQU1BLENBQ1ZILENBQXdCLEVBQ3hCQyxDQUF3QixFQUNOO0VBQ2xCLE9BQU8sSUFBSWYsZ0JBQWdCLENBQUNjLENBQUMsRUFBRUMsQ0FBQyxDQUFDO0FBQ25DLENBQUM7QUFFRCxJQUFNRyxRQUFRLEdBQUcsU0FBWEEsUUFBUUEsQ0FDWkosQ0FBd0IsRUFDeEJDLENBQXdCLEVBQ0E7RUFDeEIsT0FBTyxJQUFJWixzQkFBc0IsQ0FBQ1csQ0FBQyxFQUFFQyxDQUFDLENBQUM7QUFDekMsQ0FBQztBQUVELElBQU1JLE1BQU0sR0FBRyxTQUFUQSxNQUFNQSxDQUFhTCxDQUFlLEVBQUVNLE9BQWUsRUFBa0I7RUFDekUsT0FBTyxJQUFJbEIsY0FBYyxDQUFDWSxDQUFDLEVBQUVNLE9BQU8sQ0FBQztBQUN2QyxDQUFDO0FBRUQsSUFBTUMsU0FBUyxHQUFHLFNBQVpBLFNBQVNBLENBQ2JQLENBQWUsRUFDZlEsR0FBVyxFQUNYQyxHQUFXLEVBQ1E7RUFDbkIsT0FBTyxJQUFJeEIsaUJBQWlCLENBQUNlLENBQUMsRUFBRVEsR0FBRyxFQUFFQyxHQUFHLENBQUM7QUFDM0MsQ0FBQztBQUVELElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBaUJBLENBQ3JCQyxRQUFzQixFQUN0QkMsTUFBaUMsRUFDakM7RUFDQSxJQUFJRCxRQUFRLElBQUlDLE1BQU0sQ0FBQ0MsVUFBVSxFQUFFO0lBQ2pDLE9BQU8sWUFBYTtNQUNsQkQsTUFBTSxDQUFDQyxVQUFVLElBQUlELE1BQU0sQ0FBQ0MsVUFBVSxDQUFBQyxLQUFBLENBQWpCRixNQUFNLEVBQUFHLFNBQUEsQ0FBb0I7TUFDL0NKLFFBQVEsSUFBSUEsUUFBUSxDQUFBRyxLQUFBLFNBQUFDLFNBQUEsQ0FBUztJQUMvQixDQUFDO0VBQ0gsQ0FBQyxNQUFNO0lBQ0wsT0FBT0osUUFBUSxJQUFJQyxNQUFNLENBQUNDLFVBQVU7RUFDdEM7QUFDRixDQUFDO0FBRUQsSUFBTUcsZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUNuQkMsS0FBc0QsRUFDdERMLE1BQWMsRUFDZE0sSUFBa0UsRUFDN0M7RUFDckIsSUFBSUQsS0FBSyxZQUFZdkIsZUFBZSxFQUFFO0lBQ3BDLElBQU15QixPQUFPLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxLQUFPVCxNQUFNLENBQUM7SUFDM0IsSUFBTVUsT0FBTyxHQUFBRixNQUFBLENBQUFDLE1BQUEsS0FBT1QsTUFBTSxDQUFDO0lBQzNCLEtBQUssSUFBTVcsR0FBRyxJQUFJWCxNQUFNLEVBQUU7TUFDeEIsSUFBQVksV0FBQSxHQUFlWixNQUFNLENBQUNXLEdBQUcsQ0FBQztRQUFuQkUsQ0FBQyxHQUFBRCxXQUFBLENBQURDLENBQUM7UUFBRUMsQ0FBQyxHQUFBRixXQUFBLENBQURFLENBQUM7TUFDWCxJQUFJRCxDQUFDLEtBQUtFLFNBQVMsSUFBSUQsQ0FBQyxLQUFLQyxTQUFTLEVBQUU7UUFDdENSLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDLEdBQUdFLENBQUM7UUFDaEJILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLEdBQUdHLENBQUM7TUFDbEI7SUFDRjtJQUNBLElBQU1FLEVBQUUsR0FBR1YsSUFBSSxDQUFFRCxLQUFLLENBQW1CUSxDQUFDLEVBQUVOLE9BQU8sQ0FBQztJQUNwRCxJQUFNVSxFQUFFLEdBQUdYLElBQUksQ0FBRUQsS0FBSyxDQUFtQlMsQ0FBQyxFQUFFSixPQUFPLENBQUM7SUFHcEQsT0FBT1EsUUFBUSxDQUFDLENBQUNGLEVBQUUsRUFBRUMsRUFBRSxDQUFDLEVBQUU7TUFBQ0UsWUFBWSxFQUFFO0lBQUssQ0FBQyxDQUFDO0VBQ2xELENBQUMsTUFBTSxJQUFJZCxLQUFLLFlBQVllLHNCQUFhLEVBQUU7SUFDekMsSUFBTUMsT0FBTyxHQUFBYixNQUFBLENBQUFDLE1BQUEsS0FBT1QsTUFBTSxDQUFDO0lBQzNCLElBQU1zQixPQUFPLEdBQUFkLE1BQUEsQ0FBQUMsTUFBQSxLQUFPVCxNQUFNLENBQUM7SUFDM0IsSUFBTXVCLE9BQU8sR0FBQWYsTUFBQSxDQUFBQyxNQUFBLEtBQU9ULE1BQU0sQ0FBQztJQUMzQixJQUFNd0IsT0FBTyxHQUFBaEIsTUFBQSxDQUFBQyxNQUFBLEtBQU9ULE1BQU0sQ0FBQztJQUMzQixLQUFLLElBQU1XLElBQUcsSUFBSVgsTUFBTSxFQUFFO01BQ3hCLElBQUF5QixZQUFBLEdBQXFCekIsTUFBTSxDQUFDVyxJQUFHLENBQUM7UUFBekJlLENBQUMsR0FBQUQsWUFBQSxDQUFEQyxDQUFDO1FBQUVDLENBQUMsR0FBQUYsWUFBQSxDQUFERSxDQUFDO1FBQUV0QyxDQUFDLEdBQUFvQyxZQUFBLENBQURwQyxDQUFDO1FBQUVELENBQUMsR0FBQXFDLFlBQUEsQ0FBRHJDLENBQUM7TUFDakIsSUFDRXNDLENBQUMsS0FBS1gsU0FBUyxJQUNmWSxDQUFDLEtBQUtaLFNBQVMsSUFDZjFCLENBQUMsS0FBSzBCLFNBQVMsSUFDZjNCLENBQUMsS0FBSzJCLFNBQVMsRUFDZjtRQUNBTSxPQUFPLENBQUNWLElBQUcsQ0FBQyxHQUFHZSxDQUFDO1FBQ2hCSixPQUFPLENBQUNYLElBQUcsQ0FBQyxHQUFHZ0IsQ0FBQztRQUNoQkosT0FBTyxDQUFDWixJQUFHLENBQUMsR0FBR3RCLENBQUM7UUFDaEJtQyxPQUFPLENBQUNiLElBQUcsQ0FBQyxHQUFHdkIsQ0FBQztNQUNsQjtJQUNGO0lBQ0EsSUFBTXdDLEVBQUUsR0FBR3RCLElBQUksQ0FBRUQsS0FBSyxDQUFpQnFCLENBQUMsRUFBRUwsT0FBTyxDQUFDO0lBQ2xELElBQU1RLEVBQUUsR0FBR3ZCLElBQUksQ0FBRUQsS0FBSyxDQUFpQnNCLENBQUMsRUFBRUwsT0FBTyxDQUFDO0lBQ2xELElBQU1RLEVBQUUsR0FBR3hCLElBQUksQ0FBRUQsS0FBSyxDQUFpQmhCLENBQUMsRUFBRWtDLE9BQU8sQ0FBQztJQUNsRCxJQUFNUSxFQUFFLEdBQUd6QixJQUFJLENBQUVELEtBQUssQ0FBaUJqQixDQUFDLEVBQUVvQyxPQUFPLENBQUM7SUFHbEQsT0FBT04sUUFBUSxDQUFDLENBQUNVLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsQ0FBQyxFQUFFO01BQUNaLFlBQVksRUFBRTtJQUFLLENBQUMsQ0FBQztFQUMxRDtFQUNBLE9BQU8sSUFBSTtBQUNiLENBQUM7QUFFRCxJQUFNYSxNQUFNLEdBQUcsU0FBVEEsTUFBTUEsQ0FDVjNCLEtBQXNELEVBQ3RETCxNQUE2QixFQUNUO0VBQ3BCLElBQU1pQyxNQUFLLEdBQUcsU0FBUkEsS0FBS0EsQ0FDVEMsYUFBOEQsRUFDOURDLGFBQW9DLEVBQ3BDcEMsUUFBdUIsRUFDakI7SUFDTkEsUUFBUSxHQUFHRCxpQkFBaUIsQ0FBQ0MsUUFBUSxFQUFFb0MsYUFBYSxDQUFDO0lBQ3JELElBQU1DLFdBQWdCLEdBQUdGLGFBQWE7SUFDdEMsSUFBTUcsWUFBaUIsR0FBR0YsYUFBYTtJQUN2Q0MsV0FBVyxDQUFDRSxZQUFZLEVBQUU7SUFDMUIsSUFBSUgsYUFBYSxDQUFDSSxPQUFPLFlBQVk3RCxZQUFZLEVBQUU7TUFDakQwRCxXQUFXLENBQUNJLEtBQUssQ0FDZixJQUFJNUQsZ0JBQWdCLENBQ2xCd0QsV0FBVyxFQUNYRCxhQUFhLENBQUNJLE9BQU8sRUFDckJ2RCxlQUFlLEVBQ2ZxRCxZQUFZLEVBQ1p0QyxRQUFRLENBQ1QsQ0FDRjtJQUNILENBQUMsTUFBTTtNQUNMcUMsV0FBVyxDQUFDSyxPQUFPLENBQUMsSUFBSXpELGVBQWUsQ0FBQ3FELFlBQVksQ0FBQyxFQUFFdEMsUUFBUSxDQUFDO0lBQ2xFO0VBQ0YsQ0FBQztFQUNELE9BQ0VLLGVBQWUsQ0FBQ0MsS0FBSyxFQUFFTCxNQUFNLEVBQUVnQyxNQUFNLENBQUMsSUFBSTtJQUN4Q0MsS0FBSyxFQUFFLFNBQUFBLE1BQVVsQyxRQUF1QixFQUFRO01BQzlDa0MsTUFBSyxDQUFDNUIsS0FBSyxFQUFFTCxNQUFNLEVBQUVELFFBQVEsQ0FBQztJQUNoQyxDQUFDO0lBRUQyQyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFrQjtNQUN0QnJDLEtBQUssQ0FBQ3NDLGFBQWEsRUFBRTtJQUN2QixDQUFDO0lBRURDLEtBQUssRUFBRSxTQUFBQSxNQUFBLEVBQWtCO01BQ3ZCdkMsS0FBSyxDQUFDd0MsY0FBYyxFQUFFO0lBQ3hCLENBQUM7SUFFREMsZ0JBQWdCLEVBQUUsU0FBQUEsaUJBQVVDLFVBQW1CLEVBQVE7TUFDckQsSUFBTVYsWUFBWSxHQUFBN0IsTUFBQSxDQUFBQyxNQUFBLEtBQU9ULE1BQU07UUFBRStDLFVBQVUsRUFBVkE7TUFBVSxFQUFDO01BQzVDZCxNQUFLLENBQUM1QixLQUFLLEVBQUVnQyxZQUFZLENBQUM7SUFDNUIsQ0FBQztJQUVEVyxvQkFBb0IsRUFBRSxTQUFBQSxxQkFBQSxFQUFxQjtNQUN6QyxPQUFPaEQsTUFBTSxDQUFDaUQsZUFBZSxJQUFJLEtBQUs7SUFDeEM7RUFDRixDQUFDO0FBRUwsQ0FBQztBQUVELElBQU1DLE1BQU0sR0FBRyxTQUFUQSxNQUFNQSxDQUNWN0MsS0FBc0QsRUFDdERMLE1BQTZCLEVBQ1Q7RUFDcEIsSUFBTWlDLE9BQUssR0FBRyxTQUFSQSxLQUFLQSxDQUNUQyxhQUE4RCxFQUM5REMsYUFBb0MsRUFDcENwQyxRQUF1QixFQUNqQjtJQUNOQSxRQUFRLEdBQUdELGlCQUFpQixDQUFDQyxRQUFRLEVBQUVvQyxhQUFhLENBQUM7SUFDckQsSUFBTUMsV0FBZ0IsR0FBR0YsYUFBYTtJQUN0QyxJQUFNRyxZQUFpQixHQUFHRixhQUFhO0lBQ3ZDQyxXQUFXLENBQUNFLFlBQVksRUFBRTtJQUMxQixJQUFJSCxhQUFhLENBQUNJLE9BQU8sWUFBWTdELFlBQVksRUFBRTtNQUNqRDBELFdBQVcsQ0FBQ0ksS0FBSyxDQUNmLElBQUk1RCxnQkFBZ0IsQ0FDbEJ3RCxXQUFXLEVBQ1hELGFBQWEsQ0FBQ0ksT0FBTyxFQUNyQnRELGVBQWUsRUFDZm9ELFlBQVksRUFDWnRDLFFBQVEsQ0FDVCxDQUNGO0lBQ0gsQ0FBQyxNQUFNO01BQ0xxQyxXQUFXLENBQUNLLE9BQU8sQ0FBQyxJQUFJeEQsZUFBZSxDQUFDb0QsWUFBWSxDQUFDLEVBQUV0QyxRQUFRLENBQUM7SUFDbEU7RUFDRixDQUFDO0VBRUQsT0FDRUssZUFBZSxDQUFDQyxLQUFLLEVBQUVMLE1BQU0sRUFBRWtELE1BQU0sQ0FBQyxJQUFJO0lBQ3hDakIsS0FBSyxFQUFFLFNBQUFBLE1BQVVsQyxRQUF1QixFQUFRO01BQzlDa0MsT0FBSyxDQUFDNUIsS0FBSyxFQUFFTCxNQUFNLEVBQUVELFFBQVEsQ0FBQztJQUNoQyxDQUFDO0lBRUQyQyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFrQjtNQUN0QnJDLEtBQUssQ0FBQ3NDLGFBQWEsRUFBRTtJQUN2QixDQUFDO0lBRURDLEtBQUssRUFBRSxTQUFBQSxNQUFBLEVBQWtCO01BQ3ZCdkMsS0FBSyxDQUFDd0MsY0FBYyxFQUFFO0lBQ3hCLENBQUM7SUFFREMsZ0JBQWdCLEVBQUUsU0FBQUEsaUJBQVVDLFVBQW1CLEVBQVE7TUFDckQsSUFBTVYsWUFBWSxHQUFBN0IsTUFBQSxDQUFBQyxNQUFBLEtBQU9ULE1BQU07UUFBRStDLFVBQVUsRUFBVkE7TUFBVSxFQUFDO01BQzVDZCxPQUFLLENBQUM1QixLQUFLLEVBQUVnQyxZQUFZLENBQUM7SUFDNUIsQ0FBQztJQUVEVyxvQkFBb0IsRUFBRSxTQUFBQSxxQkFBQSxFQUFxQjtNQUN6QyxPQUFPaEQsTUFBTSxDQUFDaUQsZUFBZSxJQUFJLEtBQUs7SUFDeEM7RUFDRixDQUFDO0FBRUwsQ0FBQztBQUVELElBQU1FLEtBQUssR0FBRyxTQUFSQSxLQUFLQSxDQUNUOUMsS0FBc0QsRUFDdERMLE1BQTRCLEVBQ1I7RUFDcEIsSUFBTWlDLE9BQUssR0FBRyxTQUFSQSxLQUFLQSxDQUNUQyxhQUE4RCxFQUM5REMsYUFBbUMsRUFDbkNwQyxRQUF1QixFQUNqQjtJQUNOQSxRQUFRLEdBQUdELGlCQUFpQixDQUFDQyxRQUFRLEVBQUVvQyxhQUFhLENBQUM7SUFDckQsSUFBTUMsV0FBZ0IsR0FBR0YsYUFBYTtJQUN0QyxJQUFNRyxZQUFpQixHQUFHRixhQUFhO0lBQ3ZDQyxXQUFXLENBQUNFLFlBQVksRUFBRTtJQUMxQkYsV0FBVyxDQUFDSyxPQUFPLENBQUMsSUFBSTFELGNBQWMsQ0FBQ3NELFlBQVksQ0FBQyxFQUFFdEMsUUFBUSxDQUFDO0VBQ2pFLENBQUM7RUFFRCxPQUNFSyxlQUFlLENBQUNDLEtBQUssRUFBRUwsTUFBTSxFQUFFbUQsS0FBSyxDQUFDLElBQUk7SUFDdkNsQixLQUFLLEVBQUUsU0FBQUEsTUFBVWxDLFFBQXVCLEVBQVE7TUFDOUNrQyxPQUFLLENBQUM1QixLQUFLLEVBQUVMLE1BQU0sRUFBRUQsUUFBUSxDQUFDO0lBQ2hDLENBQUM7SUFFRDJDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQWtCO01BQ3RCckMsS0FBSyxDQUFDc0MsYUFBYSxFQUFFO0lBQ3ZCLENBQUM7SUFFREMsS0FBSyxFQUFFLFNBQUFBLE1BQUEsRUFBa0I7TUFDdkJ2QyxLQUFLLENBQUN3QyxjQUFjLEVBQUU7SUFDeEIsQ0FBQztJQUVEQyxnQkFBZ0IsRUFBRSxTQUFBQSxpQkFBVUMsVUFBbUIsRUFBUTtNQUNyRCxJQUFNVixZQUFZLEdBQUE3QixNQUFBLENBQUFDLE1BQUEsS0FBT1QsTUFBTTtRQUFFK0MsVUFBVSxFQUFWQTtNQUFVLEVBQUM7TUFDNUNkLE9BQUssQ0FBQzVCLEtBQUssRUFBRWdDLFlBQVksQ0FBQztJQUM1QixDQUFDO0lBRURXLG9CQUFvQixFQUFFLFNBQUFBLHFCQUFBLEVBQXFCO01BQ3pDLE9BQU9oRCxNQUFNLENBQUNpRCxlQUFlLElBQUksS0FBSztJQUN4QztFQUNGLENBQUM7QUFFTCxDQUFDO0FBRUQsSUFBTUcsUUFBUSxHQUFHLFNBQVhBLFFBQVFBLENBQ1pDLFVBQXFDLEVBQ2pCO0VBQ3BCLElBQUlDLE9BQU8sR0FBRyxDQUFDO0VBQ2YsT0FBTztJQUNMckIsS0FBSyxFQUFFLFNBQUFBLE1BQVVsQyxRQUF1QixFQUFFO01BQ3hDLElBQU1FLFVBQVUsR0FBRyxTQUFiQSxVQUFVQSxDQUFhc0QsTUFBTSxFQUFFO1FBQ25DLElBQUksQ0FBQ0EsTUFBTSxDQUFDQyxRQUFRLEVBQUU7VUFDcEJ6RCxRQUFRLElBQUlBLFFBQVEsQ0FBQ3dELE1BQU0sQ0FBQztVQUM1QjtRQUNGO1FBRUFELE9BQU8sRUFBRTtRQUVULElBQUlBLE9BQU8sS0FBS0QsVUFBVSxDQUFDSSxNQUFNLEVBQUU7VUFDakMxRCxRQUFRLElBQUlBLFFBQVEsQ0FBQ3dELE1BQU0sQ0FBQztVQUM1QjtRQUNGO1FBRUFGLFVBQVUsQ0FBQ0MsT0FBTyxDQUFDLENBQUNyQixLQUFLLENBQUNoQyxVQUFVLENBQUM7TUFDdkMsQ0FBQztNQUVELElBQUlvRCxVQUFVLENBQUNJLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDM0IxRCxRQUFRLElBQUlBLFFBQVEsQ0FBQztVQUFDeUQsUUFBUSxFQUFFO1FBQUksQ0FBQyxDQUFDO01BQ3hDLENBQUMsTUFBTTtRQUNMSCxVQUFVLENBQUNDLE9BQU8sQ0FBQyxDQUFDckIsS0FBSyxDQUFDaEMsVUFBVSxDQUFDO01BQ3ZDO0lBQ0YsQ0FBQztJQUVEeUMsSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBWTtNQUNoQixJQUFJWSxPQUFPLEdBQUdELFVBQVUsQ0FBQ0ksTUFBTSxFQUFFO1FBQy9CSixVQUFVLENBQUNDLE9BQU8sQ0FBQyxDQUFDWixJQUFJLEVBQUU7TUFDNUI7SUFDRixDQUFDO0lBRURFLEtBQUssRUFBRSxTQUFBQSxNQUFBLEVBQVk7TUFDakJTLFVBQVUsQ0FBQ0ssT0FBTyxDQUFDLFVBQUNDLFNBQVMsRUFBRUMsR0FBRyxFQUFLO1FBQ3JDLElBQUlBLEdBQUcsSUFBSU4sT0FBTyxFQUFFO1VBQ2xCSyxTQUFTLENBQUNmLEtBQUssRUFBRTtRQUNuQjtNQUNGLENBQUMsQ0FBQztNQUNGVSxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7SUFFRFIsZ0JBQWdCLEVBQUUsU0FBQUEsaUJBQUEsRUFBWTtNQUM1QixNQUFNLElBQUllLEtBQUssQ0FDYiwrRUFBK0UsQ0FDaEY7SUFDSCxDQUFDO0lBRURiLG9CQUFvQixFQUFFLFNBQUFBLHFCQUFBLEVBQXFCO01BQ3pDLE9BQU8sS0FBSztJQUNkO0VBQ0YsQ0FBQztBQUNILENBQUM7QUFPRCxJQUFNOUIsUUFBUSxHQUFHLFNBQVhBLFFBQVFBLENBQ1ptQyxVQUFxQyxFQUNyQ3JELE1BQXdCLEVBQ0o7RUFDcEIsSUFBSThELFNBQVMsR0FBRyxDQUFDO0VBRWpCLElBQU1DLFFBQVEsR0FBRyxDQUFDLENBQUM7RUFDbkIsSUFBTTVDLFlBQVksR0FBRyxFQUFFbkIsTUFBTSxJQUFJQSxNQUFNLENBQUNtQixZQUFZLEtBQUssS0FBSyxDQUFDO0VBRS9ELElBQU1vQyxNQUFNLEdBQUc7SUFDYnRCLEtBQUssRUFBRSxTQUFBQSxNQUFVbEMsUUFBdUIsRUFBRTtNQUN4QyxJQUFJK0QsU0FBUyxLQUFLVCxVQUFVLENBQUNJLE1BQU0sRUFBRTtRQUNuQzFELFFBQVEsSUFBSUEsUUFBUSxDQUFDO1VBQUN5RCxRQUFRLEVBQUU7UUFBSSxDQUFDLENBQUM7UUFDdEM7TUFDRjtNQUVBSCxVQUFVLENBQUNLLE9BQU8sQ0FBQyxVQUFDQyxTQUFTLEVBQUVDLEdBQUcsRUFBSztRQUNyQyxJQUFNSSxFQUFFLEdBQUcsU0FBTEEsRUFBRUEsQ0FBYUMsU0FBUyxFQUFFO1VBQzlCRixRQUFRLENBQUNILEdBQUcsQ0FBQyxHQUFHLElBQUk7VUFDcEJFLFNBQVMsRUFBRTtVQUNYLElBQUlBLFNBQVMsS0FBS1QsVUFBVSxDQUFDSSxNQUFNLEVBQUU7WUFDbkNLLFNBQVMsR0FBRyxDQUFDO1lBQ2IvRCxRQUFRLElBQUlBLFFBQVEsQ0FBQ2tFLFNBQVMsQ0FBQztZQUMvQjtVQUNGO1VBRUEsSUFBSSxDQUFDQSxTQUFTLENBQUNULFFBQVEsSUFBSXJDLFlBQVksRUFBRTtZQUN2Q29DLE1BQU0sQ0FBQ2IsSUFBSSxFQUFFO1VBQ2Y7UUFDRixDQUFDO1FBRUQsSUFBSSxDQUFDaUIsU0FBUyxFQUFFO1VBQ2RLLEVBQUUsQ0FBQztZQUFDUixRQUFRLEVBQUU7VUFBSSxDQUFDLENBQUM7UUFDdEIsQ0FBQyxNQUFNO1VBQ0xHLFNBQVMsQ0FBQzFCLEtBQUssQ0FBQytCLEVBQUUsQ0FBQztRQUNyQjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRHRCLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQWtCO01BQ3RCVyxVQUFVLENBQUNLLE9BQU8sQ0FBQyxVQUFDQyxTQUFTLEVBQUVDLEdBQUcsRUFBSztRQUNyQyxDQUFDRyxRQUFRLENBQUNILEdBQUcsQ0FBQyxJQUFJRCxTQUFTLENBQUNqQixJQUFJLEVBQUU7UUFDbENxQixRQUFRLENBQUNILEdBQUcsQ0FBQyxHQUFHLElBQUk7TUFDdEIsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEaEIsS0FBSyxFQUFFLFNBQUFBLE1BQUEsRUFBa0I7TUFDdkJTLFVBQVUsQ0FBQ0ssT0FBTyxDQUFDLFVBQUNDLFNBQVMsRUFBRUMsR0FBRyxFQUFLO1FBQ3JDRCxTQUFTLENBQUNmLEtBQUssRUFBRTtRQUNqQm1CLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDLEdBQUcsS0FBSztRQUNyQkUsU0FBUyxHQUFHLENBQUM7TUFDZixDQUFDLENBQUM7SUFDSixDQUFDO0lBRURoQixnQkFBZ0IsRUFBRSxTQUFBQSxpQkFBQSxFQUFZO01BQzVCLE1BQU0sSUFBSWUsS0FBSyxDQUNiLCtFQUErRSxDQUNoRjtJQUNILENBQUM7SUFFRGIsb0JBQW9CLEVBQUUsU0FBQUEscUJBQUEsRUFBcUI7TUFDekMsT0FBTyxLQUFLO0lBQ2Q7RUFDRixDQUFDO0VBRUQsT0FBT08sTUFBTTtBQUNmLENBQUM7QUFFRCxJQUFNVyxLQUFLLEdBQUcsU0FBUkEsS0FBS0EsQ0FBYUMsSUFBWSxFQUFzQjtFQUV4RCxPQUFPakIsTUFBTSxDQUFDLElBQUlyRSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDbEMwRCxPQUFPLEVBQUUsQ0FBQztJQUNWMkIsS0FBSyxFQUFFQyxJQUFJO0lBQ1hDLFFBQVEsRUFBRSxDQUFDO0lBQ1huQixlQUFlLEVBQUU7RUFDbkIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELElBQU1vQixPQUFPLEdBQUcsU0FBVkEsT0FBT0EsQ0FDWEYsSUFBWSxFQUNaZCxVQUFxQyxFQUNqQjtFQUNwQixPQUFPbkMsUUFBUSxDQUNibUMsVUFBVSxDQUFDaUIsR0FBRyxDQUFDLFVBQUNYLFNBQVMsRUFBRVksQ0FBQyxFQUFLO0lBQy9CLE9BQU9uQixRQUFRLENBQUMsQ0FBQ2MsS0FBSyxDQUFDQyxJQUFJLEdBQUdJLENBQUMsQ0FBQyxFQUFFWixTQUFTLENBQUMsQ0FBQztFQUMvQyxDQUFDLENBQUMsQ0FDSDtBQUNILENBQUM7QUFRRCxJQUFNYSxJQUFJLEdBQUcsU0FBUEEsSUFBSUEsQ0FDUmIsU0FBNkIsRUFFVDtFQUFBLElBQUFjLElBQUEsR0FBQXRFLFNBQUEsQ0FBQXNELE1BQUEsUUFBQXRELFNBQUEsUUFBQVksU0FBQSxHQUFBWixTQUFBLE1BRGtELENBQUMsQ0FBQztJQUFBdUUsZUFBQSxHQUFBRCxJQUFBLENBQXZFMUIsVUFBVTtJQUFWQSxVQUFVLEdBQUEyQixlQUFBLGNBQUcsQ0FBQyxDQUFDLEdBQUFBLGVBQUE7SUFBQUMscUJBQUEsR0FBQUYsSUFBQSxDQUFFRyxvQkFBb0I7SUFBcEJBLG9CQUFvQixHQUFBRCxxQkFBQSxjQUFHLElBQUksR0FBQUEscUJBQUE7RUFFN0MsSUFBSUUsVUFBVSxHQUFHLEtBQUs7RUFDdEIsSUFBSUMsZUFBZSxHQUFHLENBQUM7RUFDdkIsT0FBTztJQUNMN0MsS0FBSyxFQUFFLFNBQUFBLE1BQVVsQyxRQUF1QixFQUFFO01BQ3hDLElBQU1nRixPQUFPLEdBQUcsU0FBVkEsT0FBT0EsQ0FBQSxFQUF5RDtRQUFBLElBQTVDeEIsTUFBaUIsR0FBQXBELFNBQUEsQ0FBQXNELE1BQUEsUUFBQXRELFNBQUEsUUFBQVksU0FBQSxHQUFBWixTQUFBLE1BQUc7VUFBQ3FELFFBQVEsRUFBRTtRQUFJLENBQUM7UUFDNUQsSUFDRXFCLFVBQVUsSUFDVkMsZUFBZSxLQUFLL0IsVUFBVSxJQUM5QlEsTUFBTSxDQUFDQyxRQUFRLEtBQUssS0FBSyxFQUN6QjtVQUNBekQsUUFBUSxJQUFJQSxRQUFRLENBQUN3RCxNQUFNLENBQUM7UUFDOUIsQ0FBQyxNQUFNO1VBQ0x1QixlQUFlLEVBQUU7VUFDakJGLG9CQUFvQixJQUFJakIsU0FBUyxDQUFDZixLQUFLLEVBQUU7VUFDekNlLFNBQVMsQ0FBQzFCLEtBQUssQ0FBQzhDLE9BQU8sQ0FBQztRQUMxQjtNQUNGLENBQUM7TUFDRCxJQUFJLENBQUNwQixTQUFTLElBQUlaLFVBQVUsS0FBSyxDQUFDLEVBQUU7UUFDbENoRCxRQUFRLElBQUlBLFFBQVEsQ0FBQztVQUFDeUQsUUFBUSxFQUFFO1FBQUksQ0FBQyxDQUFDO01BQ3hDLENBQUMsTUFBTTtRQUNMLElBQUlHLFNBQVMsQ0FBQ1gsb0JBQW9CLEVBQUUsRUFBRTtVQUNwQ1csU0FBUyxDQUFDYixnQkFBZ0IsQ0FBQ0MsVUFBVSxDQUFDO1FBQ3hDLENBQUMsTUFBTTtVQUNMZ0MsT0FBTyxFQUFFO1FBQ1g7TUFDRjtJQUNGLENBQUM7SUFFRHJDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQWtCO01BQ3RCbUMsVUFBVSxHQUFHLElBQUk7TUFDakJsQixTQUFTLENBQUNqQixJQUFJLEVBQUU7SUFDbEIsQ0FBQztJQUVERSxLQUFLLEVBQUUsU0FBQUEsTUFBQSxFQUFrQjtNQUN2QmtDLGVBQWUsR0FBRyxDQUFDO01BQ25CRCxVQUFVLEdBQUcsS0FBSztNQUNsQmxCLFNBQVMsQ0FBQ2YsS0FBSyxFQUFFO0lBQ25CLENBQUM7SUFFREUsZ0JBQWdCLEVBQUUsU0FBQUEsaUJBQUEsRUFBWTtNQUM1QixNQUFNLElBQUllLEtBQUssQ0FDYiwyRUFBMkUsQ0FDNUU7SUFDSCxDQUFDO0lBRURiLG9CQUFvQixFQUFFLFNBQUFBLHFCQUFBLEVBQXFCO01BQ3pDLE9BQU9XLFNBQVMsQ0FBQ1gsb0JBQW9CLEVBQUU7SUFDekM7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUVELFNBQVNnQyxTQUFTQSxDQUNoQkMsS0FBaUMsRUFDakNDLFFBQWtCLEVBQ1E7RUFDMUIsSUFBSSxDQUFDRCxLQUFLLEVBQUU7SUFDVixPQUFPQyxRQUFRO0VBQ2pCLENBQUMsTUFBTSxJQUFJRCxLQUFLLFlBQVkvRyxhQUFhLEVBQUU7SUFDekMrRyxLQUFLLENBQUNFLGFBQWEsQ0FBQ0QsUUFBUSxDQUFDO0lBQzdCLE9BQU9ELEtBQUs7RUFDZCxDQUFDLE1BQU07SUFDTCxPQUFPLFlBQWE7TUFDbEIsT0FBT0EsS0FBSyxLQUFLLFVBQVUsSUFBSUEsS0FBSyxDQUFBL0UsS0FBQSxTQUFBQyxTQUFBLENBQVM7TUFDN0MrRSxRQUFRLENBQUFoRixLQUFBLFNBQUFDLFNBQUEsQ0FBUztJQUNuQixDQUFDO0VBQ0g7QUFDRjtBQUVBLFNBQVNpRixXQUFXQSxDQUNsQkgsS0FBaUMsRUFDakNDLFFBQWtCLEVBQ1o7RUFDTixJQUFJRCxLQUFLLElBQUlBLEtBQUssWUFBWS9HLGFBQWEsRUFBRTtJQUMzQytHLEtBQUssQ0FBQ0ksZ0JBQWdCLENBQUNILFFBQVEsQ0FBQztFQUNsQztBQUNGO0FBRUEsSUFBTUQsS0FBSyxHQUFHLFNBQVJBLEtBQUtBLENBQ1RLLFVBQW9DLEVBQ3BDdEYsTUFBbUIsRUFDZDtFQUNMLElBQU11RixhQUFhLEdBQUcsSUFBSXJILGFBQWEsQ0FBQ29ILFVBQVUsRUFBRXRGLE1BQU0sQ0FBQztFQUMzRCxJQUFJdUYsYUFBYSxDQUFDQyxVQUFVLEVBQUU7SUFDNUIsT0FBT0QsYUFBYTtFQUN0QixDQUFDLE1BQU07SUFDTCxPQUFPQSxhQUFhLENBQUNFLFlBQVksRUFBRTtFQUNyQztBQUNGLENBQUM7QUFZREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFPZkMsS0FBSyxFQUFFL0csYUFBYTtFQU1wQmdILE9BQU8sRUFBRS9HLGVBQWU7RUFJeEJnSCxLQUFLLEVBQUUxRSxzQkFBYTtFQU1wQjJFLGFBQWEsRUFBRXhILHFCQUFxQjtFQU9wQ3lILElBQUksRUFBRXRILFlBQVk7RUFRbEJ5RSxLQUFLLEVBQUxBLEtBQUs7RUFPTEQsTUFBTSxFQUFOQSxNQUFNO0VBT05sQixNQUFNLEVBQU5BLE1BQU07RUFRTjdDLEdBQUcsRUFBSEEsR0FBRztFQVFIRyxRQUFRLEVBQVJBLFFBQVE7RUFRUkMsTUFBTSxFQUFOQSxNQUFNO0VBUU5DLFFBQVEsRUFBUkEsUUFBUTtFQVFSQyxNQUFNLEVBQU5BLE1BQU07RUFTTkUsU0FBUyxFQUFUQSxTQUFTO0VBT1R1RSxLQUFLLEVBQUxBLEtBQUs7RUFRTGQsUUFBUSxFQUFSQSxRQUFRO0VBUVJsQyxRQUFRLEVBQVJBLFFBQVE7RUFPUm1ELE9BQU8sRUFBUEEsT0FBTztFQU9QRyxJQUFJLEVBQUpBLElBQUk7RUFRSlMsS0FBSyxFQUFMQSxLQUFLO0VBT0wvRix1QkFBdUIsRUFBdkJBLHVCQUF1QjtFQVF2QmYsaUJBQWlCLEVBQWpCQSxpQkFBaUI7RUFRakI2RyxTQUFTLEVBQVRBLFNBQVM7RUFDVEksV0FBVyxFQUFYQSxXQUFXO0VBS1hhLEtBQUssRUFBRS9IO0FBQ1QsQ0FBQyJ9